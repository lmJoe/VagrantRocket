var EffectType,CustomAdConfig,AdImgType,AdRespondType,AdPosType,AnimationType,AdContainType,GuessType,DrawerType,AdGuessAnimationType,__extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function __(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();!function(t){var e;t.StatEventNames={Share:"点击分享",Navigation:"点击游卡广告",Bootup:"启动",Duration:"单次时长",NavigationConfirm:"点击广告确定"},function(t){t[t.More=1]="More",t[t.Vip=2]="Vip"}(e=t.LocationID||(t.LocationID={})),t.LocationNames=[],t.LocationNames[e.More]="更多游戏",t.LocationNames[e.Vip]="精彩推荐"}(zm||(zm={})),function(t){!function(t){t.adaptStatID=function(t,e){if(1e3==e){if(1==t)return 1002;if(2==t)return 1001}return e+t},t.obj2query=function(t){if(!t)return"";var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")},t.compareVersion=function(t,e){for(var n=t.split("."),i=e.split("."),o=Math.max(n.length,i.length);n.length<o;)n.push("0");for(;i.length<o;)i.push("0");for(var s=0;s<o;s++){var a=parseInt(n[s]),r=parseInt(i[s]);if(a>r)return 1;if(a<r)return-1}return 0}}(t.utils||(t.utils={}))}(zm||(zm={})),function(t){!function(e){e.POST=function(t,n,i,o,s,a){void 0===a&&(a=0),e.request?getRequestTask().init(t,"post",JSON.stringify(n),i,o,s,a):o&&o.run()},e.GET=function(n,i,o,s,a,r){if(void 0===r&&(r=0),e.request){var h=t.utils.obj2query(i);h&&(n+="?"+h),getRequestTask().init(n,"get",null,o,s,a,r)}else s&&s.run()};var n=[];function getRequestTask(){return 0==n.length?new i:n.pop()}var i=function(){function RequestTask(){}return RequestTask.prototype.init=function(t,e,n,i,o,s,a){void 0===a&&(a=0),this.method=e,this.url=t,this.params=n,this.success=i,this.fail=o,this.header=s,this.retryCnt=0,this.maxRetryCnt=a,this.request()},RequestTask.prototype.request=function(){this.requestTime=Laya.Browser.now(),e.request(this.method,this.url,this.params,Laya.Handler.create(this,this.onSuccess),Laya.Handler.create(this,this.onFail),this.header)},RequestTask.prototype.retry=function(){this.retryCnt++,this.request()},RequestTask.prototype.onSuccess=function(t){var e=this.success;this.recover(),e&&e.runWith(t)},RequestTask.prototype.onFail=function(){if(this.retryCnt<this.maxRetryCnt){var t=this.calculateDelay();Laya.timer.once(t,this,this.retry)}else{var e=this.fail;this.recover(),e&&e.run()}},RequestTask.prototype.recover=function(){this.clear(),n.push(this)},RequestTask.prototype.clear=function(){this.method=null,this.url=null,this.params=null,this.success=null,this.fail=null,this.header=null,this.retryCnt=0,this.maxRetryCnt=0},RequestTask.prototype.calculateDelay=function(){var t=Date.now(),e=1e3*Math.pow(2,this.retryCnt)-t+this.requestTime;return e<0&&(e=0),e>5e3&&(e=5e3),e},RequestTask}()}(t.http||(t.http={}))}(zm||(zm={})),function(t){t[t.None=0]="None",t[t.Reddot=1]="Reddot"}(EffectType||(EffectType={})),function(t){var e=function(){function YokaStat(){this.inited=!1,this.booted=!1,this.loaded=!1,this.showTime=0,this.customEvents=[]}return YokaStat.prototype.init=function(t,e,n,i,o){this.inited||(this.userName=t,this.userID=e,this.gameIDName=n+"-"+i,this.gameID=n,this.gameName=i,this.appVersion=o,this.initParams(),this.sendBootupEvent())},YokaStat.prototype.initUserInfo=function(t,e){this.userName=t,this.userID=e,this.booted&&this.loaded&&this.sendInitLogin()},YokaStat.prototype.sendLoaded=function(){this.loaded=!0,this.booted&&this.sendInitLogin()},YokaStat.prototype.sendBootupEvent=function(){this.bootEvent=this.bootEvent||this.getBootupEvent(),this.sendCustomEvent(this.bootEvent,!0,Laya.Handler.create(this,this.onBootup),Laya.Handler.create(this,this.onBootupFail))},YokaStat.prototype.getBootupEvent=function(){var e=this.getInitParams();return e.event_id="event1002",e.event_name=t.StatEventNames.Bootup,e},YokaStat.prototype.onBootup=function(){this.booted=!0,this.loaded&&this.sendInitLogin()},YokaStat.prototype.onBootupFail=function(){Laya&&Laya.timer&&Laya.timer.once?Laya.timer.once(3e3,this,this.sendBootupEvent):setTimeout(this.sendBootupEvent.bind(this),3e3)},YokaStat.prototype.onInited=function(t){this.inited=!0,console.log("yoka stat inited"),this.checkCustomEvents()},YokaStat.prototype.onInitFail=function(){Laya&&Laya.timer&&Laya.timer.once?Laya.timer.once(3e3,this,this.sendInitLogin):setTimeout(this.sendInitLogin.bind(this),3e3)},YokaStat.prototype.sendInitLogin=function(){this.userName&&this.userID&&(this.initLoginEvent=this.initLoginEvent||this.getLoginEvent(),this.sendEvent([this.initLoginEvent],Laya.Handler.create(this,this.onInited),Laya.Handler.create(this,this.onInitFail)))},YokaStat.prototype.checkCustomEvents=function(){this.customEvents&&this.customEvents.length>0&&this.sendEvent(this.customEvents)},YokaStat.prototype.shareStat=function(e,n){this.addYokaStat(1e3,t.StatEventNames.Share,{shareid:n,sharepid:e})},YokaStat.prototype.navigationStat=function(e,n,i,o,s,a,r){var h={location_id:e,ad_page_id:n,advid:i,adid:o};r&&(h.plat_id=r),s&&(h.order_num=s),a&&(h.effect_type=a),this.addYokaStat(1001,t.StatEventNames.Navigation,h)},YokaStat.prototype.navigationConfirmStat=function(e,n,i,o,s,a,r){var h={location_id:e,ad_page_id:n,advid:i,adid:o};r&&(h.plat_id=r),s&&(h.order_num=s),a&&(h.effect_type=a),this.addYokaStat(1004,t.StatEventNames.NavigationConfirm,h)},YokaStat.prototype.sendAdShowTimeEvents=function(t,e){var n=this;if(e&&!(e.length<=0)){var i,o=[],s=Math.floor(Date.now()/1e3);e.forEach(function(e){i={userName:n.userName,user_id:n.userID,user_type:n.userType,device_model:n.deviceModel,game_id:n.gameID,game_name:n.gameName,game_id_name:n.gameIDName,os_version:n.osVersion,app_version:n.appVersion,device_id:n.deviceID,event_id:"101",event_name:"广告展示",ad_page_id:e.adPageId,advid:e.advid,adid:e.adid,order_num:e.order,effect_type:e.effectType,duration:e.duration,net_type:n.getNetType()},n.osType&&(i.os_type=n.osType),n.channel&&(i.channel=n.channel),n.plan&&(i.plan=n.plan),t&&(i.plat_id=t),o.push({id:4007,label:"mini_game_platform_advertise",start_time:s,parameters:i})}),this.sendEvent(o)}},YokaStat.prototype.addYokaStat=function(t,e,n){var i={userName:this.userName,user_id:this.userID,user_type:this.userType,device_model:this.deviceModel,game_id:this.gameID,game_name:this.gameName,game_id_name:this.gameIDName,os_version:this.osVersion,app_version:this.appVersion,event_id:"event"+t,event_name:e,net_type:this.getNetType()};if(n)for(var o in n)"number"!=typeof n[o]&&"string"!=typeof n[o]||(i[o]=n[o]);this.sendCustomEvent(i)},YokaStat.prototype.getPostData=function(t){if(t&&t.length>0)return{app_id:YokaStat.Yoka_App_Id,is_server:!1,events:t}},YokaStat.prototype.onShow=function(){var t=this.getLoginEvent();t&&this.sendEvent([t]),this.showTime=Date.now()},YokaStat.prototype.onHide=function(){this.showTime>0&&this.addYokaStat(1003,t.StatEventNames.Duration,{duration:Date.now()-this.showTime})},YokaStat.prototype.getNetType=function(){return this.netType()||"4g"},YokaStat.prototype.getLoginEvent=function(){var t=this.getInitParams(),e={id:4002,label:"mini_game_platform_login",start_time:Math.floor(Date.now()/1e3),parameters:t};return this.osType&&(e.os_type=this.osType),this.channel&&(e.channel=this.channel),this.plan&&(t.plan=this.plan),e},YokaStat.prototype.getInitParams=function(){var t={user_type:this.userType,device_model:this.deviceModel,game_id:this.gameID,game_name:this.gameName,game_id_name:this.gameIDName,os_version:this.osVersion,app_version:this.appVersion,device_id:this.deviceID,login_way:this.loginWay,net_type:this.getNetType()};return this.userID&&(t.user_id=this.userID),this.userName&&(t.userName=this.userName),this.locationID&&(t.location_id=this.locationID),this.subgameid&&(t.subgameid=this.subgameid),this.subuid&&(t.subuid=this.subuid),this.ad_page_id&&(t.ad_page_id=this.ad_page_id),this.advid&&(t.advid=this.advid),this.adid&&(t.adid=this.adid),this.sharepid&&(t.sharepid=this.sharepid),this.shareid&&(t.shareid=this.shareid),this.shareuid&&(t.shareuid=this.shareuid),t},YokaStat.prototype.sendCustomEvent=function(t,e,n,i){void 0===e&&(e=!1);var o={id:4005,label:"mini_game_platform_times_event",start_time:Math.floor(Date.now()/1e3),parameters:t};this.osType&&(o.os_type=this.osType),this.channel&&(o.channel=this.channel),this.plan&&(t.plan=this.plan),this.inited||e?this.sendEvent([o],n,i):this.customEvents.push(o)},YokaStat.prototype.sendEvent=function(e,n,i){if(console.log("[send event]",e),t.shouldSendStat){var o=this.getPostData(e);o&&t.http.POST(YokaStat.Yoka_Url,o,n,i)}},YokaStat.prototype.getRandom=function(){for(var t,e,n=[0,1,2,3,4,5,6,7,8,9],i=10;i>1;i--)e=n[t=Math.floor(10*Math.random())],n[t]=n[i-1],n[i-1]=e;e=0;for(i=0;i<5;i++)e=10*e+n[i];return e+""+Date.now()},YokaStat.Yoka_App_Id="301_0",YokaStat.Yoka_Url="https://ykdc.hzyoka.com/bfrd/json",YokaStat.NetTypeKey="zmntdata",YokaStat.UUIDKey="zmuuiddata",YokaStat}();t.YokaStat=e}(zm||(zm={})),function(t){var e=function(){function YokaShare(t,e){this.share=t,this.shareConfig=e}return YokaShare.prototype.init=function(e,n){0==t.system.runtimePlatform&&this.shareConfig.init(e,n)},Object.defineProperty(YokaShare.prototype,"UID",{set:function(t){this.shareConfig.UID=t},enumerable:!0,configurable:!0}),YokaShare.prototype.shareTipsRes=function(e,n,i){void 0===i&&(i=1);var o=t.MiniShare;o&&(o.shareTipsBg=e,o.shareTipsBtn=n,o.shareBtnState=i)},YokaShare.prototype.shareStatus=function(t){return this.shareConfig.shareStatus(t)},YokaShare.prototype.shareMessage=function(e,n,i,o,s,a){var r;(r=this.rewardShareEnable()?this.shareConfig.getSharePointCfg(e,s,a,n):this.shareConfig.getDefaultConfig(e,s,a,n)).query.shareOpenid=t.api.OpenID?t.api.OpenID:t.login.openID,t.statistics.shareStat(r.sharepid,r.shareid),this.share.shareAppMessage(r.title,r.imageUrl,r.query,i,o)},YokaShare.prototype.shareScreenShot=function(e,n,i,o,s,a,r){var h=this.shareConfig.getSharePointCfg(e,n,"",s);h.query.shareOpenid=t.api.OpenID?t.api.OpenID:t.login.openID,t.statistics.shareStat(h.sharepid,t.ShareConfig.DefaultShareID),this.share.shareScreenShot(i,o,n,h.query,a,r)},YokaShare.prototype.defaultShareConfig=function(t,e){this.shareConfig.defaultShareConfig(t,e)},YokaShare.prototype.rewardShareEnable=function(){return this.share.rewardShareEnable()},YokaShare.prototype.zmGameTriggerState=function(t){return this.share.zmGameTriggerState(t)},YokaShare}();t.YokaShare=e}(zm||(zm={})),function(t){t.CustomAdHost="https://adplatform.rzcdz2.com",t.HOST="https://zmddzapi.rzcdz2.com/adtest/",t.INTERVAL_TIME=5,t.getPages=function(){return{StartView:3,ReviveView:4,SummaryView:5}},t.PendantShakeAnglePerMs=.02,t.PendantShakeAngleLimit=25,t.ShakeAngleLimit=25,t.ShakeBreakTime=2e3,t.ShakeTurn=4,t.ShakeAnglePerMs=.15,t.BlinkPerMs=.005,t.BlinkBreakTime=2e3,t.BlinkMinAlpha=.1,t.BlinkTurn=3,t.AdSwitchTime=15e3,t.AdRollPerMs=.05}(CustomAdConfig||(CustomAdConfig={})),function(t){t[t.PNG=0]="PNG",t[t.JPG=1]="JPG",t[t.GIF=2]="GIF"}(AdImgType||(AdImgType={})),function(t){t[t.Jump=1]="Jump",t[t.JumpTwice=2]="JumpTwice",t[t.QRCode=3]="QRCode",t[t.Link=4]="Link"}(AdRespondType||(AdRespondType={})),function(t){t[t.Normal=1]="Normal",t[t.Center=2]="Center",t[t.LRTB=3]="LRTB",t[t.None=4]="None"}(AdPosType||(AdPosType={})),function(t){t[t.Normal=0]="Normal",t[t.Shake=1]="Shake",t[t.Blink=2]="Blink"}(AnimationType||(AnimationType={})),function(t){t[t.Single=0]="Single",t[t.Menu=4]="Menu",t[t.Guess=5]="Guess",t[t.PlayGame=6]="PlayGame",t[t.More=7]="More",t[t.BannerGuess=8]="BannerGuess",t[t.Box=9]="Box",t[t.Backup=10]="Backup",t[t.Pendant=11]="Pendant",t[t.VideoAd=12]="VideoAd",t[t.FullScreen=13]="FullScreen",t[t.CustomizedBanner=14]="CustomizedBanner"}(AdContainType||(AdContainType={})),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(GuessType||(GuessType={})),function(t){t[t.Menu_Top=0]="Menu_Top",t[t.Menu_Bottom=1]="Menu_Bottom",t[t.Menu_Left=2]="Menu_Left",t[t.Menu_Right=3]="Menu_Right",t[t.Menu_All=4]="Menu_All"}(DrawerType||(DrawerType={})),function(t){t[t.Switch=0]="Switch",t[t.Roll=1]="Roll"}(AdGuessAnimationType||(AdGuessAnimationType={}));var ui,AdContent=function(){function AdContent(){}return AdContent.parseData=function(t,e){if(!t||t.link_value==zm.appId)return null;var n=new AdContent;return n._adId=t.adv_id,n._adName=t.adv_name,n._gameName="游戏名字",n._respondType=t.link_type,n._linkValue=t.link_value,n._param=t.param,n._online=null==t.online||t.online,n._resUrl=t.img,n.checkResType(),n._effectType=null==t.effect_type?EffectType.None:t.effect_type,n._iconType=t.show_type,n._showTime=t.show_time,n._frameLength=t.img_info.count,n._interval=null==t.img_info.delay?80:t.img_info.delay,n._path=t.path,n._order=e,n},AdContent.prototype.checkResType=function(){switch(this._resUrl.substr(this._resUrl.length-3,3)){case"png":case"PNG":this._imgType=AdImgType.PNG;break;case"jpg":case"JPG":this._imgType=AdImgType.JPG;break;case"gif":case"GIF":this._imgType=AdImgType.GIF,this._resUrlPrefix=this._resUrl.substr(0,this._resUrl.length-4)}},Object.defineProperty(AdContent.prototype,"resUrl",{get:function(){return this._imgType==AdImgType.GIF?this._resUrlPrefix+"_0.png":this._resUrl},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"adId",{get:function(){return this._adId},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"adName",{get:function(){return this._adName},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"gameName",{get:function(){return this._gameName},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"respondType",{get:function(){return this._respondType},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"linkValue",{get:function(){return this._linkValue},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"system",{get:function(){return this._system},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"online",{get:function(){return this._online},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"iconType",{get:function(){return this._iconType},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"showTime",{get:function(){return this._showTime},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"frameLength",{get:function(){return this._frameLength},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"interval",{get:function(){return this._interval},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"effectType",{get:function(){return this._effectType},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"order",{get:function(){return this._order},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"aniUrls",{get:function(){var t=[];if(this._imgType==AdImgType.GIF)for(var e=0;e<this._frameLength;e++)t.push(this._resUrlPrefix+"_"+e+".png");else t.push(this._resUrl);return t},enumerable:!0,configurable:!0}),Object.defineProperty(AdContent.prototype,"resUrls",{get:function(){var t=[];if(this._imgType==AdImgType.GIF)for(var e=0;e<this._frameLength;e++)t.push({url:this._resUrlPrefix+"_"+e+".png",type:Laya.Loader.IMAGE});else t.push({url:this._resUrl,type:Laya.Loader.IMAGE});return t},enumerable:!0,configurable:!0}),AdContent}(),AdContainer=function(){function AdContainer(){}return AdContainer.parseData=function(t){var e=[];if(t&&t.length>0)for(var n=void 0,i=0;i<t.length;i++)(n=AdContainer.parseOne(t[i]))&&(n.containerType==AdContainType.Menu?e.push(n):e.unshift(n));return e},AdContainer.parseOne=function(t){if(!t)return null;var e=new AdContainer;return e._containerId=t.position_id,e._containName=t.position_name,e._conWidth=t.position_info.width,e._conHeight=t.position_info.height,e._effectType=null==t.effect_type?AnimationType.Normal:t.effect_type,e._posType=t.position_type<=AdPosType.LRTB?t.position_type:AdPosType.None,e._containerType=t.position_type<=AdPosType.LRTB?AdContainType.Single:t.position_type,e._conX=null==t.position_info.x?t.position_info.x:parseInt(t.position_info.x),e._conY=null==t.position_info.y?t.position_info.y:parseInt(t.position_info.y),e._conLeft=null==t.position_info.left?t.position_info.left:parseInt(t.position_info.left),e._conRight=null==t.position_info.right?t.position_info.right:parseInt(t.position_info.right),e._conTop=null==t.position_info.top?t.position_info.top:parseInt(t.position_info.top),e._conBottom=null==t.position_info.bottom?t.position_info.bottom:parseInt(t.position_info.bottom),e._conCenterX=null==t.position_info.center_x?t.position_info.center_x:parseInt(t.position_info.center_x),e._conCenterY=null==t.position_info.center_y?t.position_info.center_y:parseInt(t.position_info.center_y),e.parseContent(t.advs),e},AdContainer.prototype.parseContent=function(t){if(this._contents=[],t&&t.length>0)for(var e=void 0,n=0;n<t.length;n++)(e=AdContent.parseData(t[n],n))&&e.online&&this._contents.push(e)},Object.defineProperty(AdContainer.prototype,"contents",{get:function(){return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"containerId",{get:function(){return this._containerId},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"containName",{get:function(){return this._containName},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conWidth",{get:function(){return this._conWidth},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conHeight",{get:function(){return this._conHeight},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"posType",{get:function(){return this._posType},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"effectType",{get:function(){return this._effectType},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"containerType",{get:function(){return this._containerType},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conX",{get:function(){return this._conX},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conY",{get:function(){return this._conY},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conLeft",{get:function(){return this._conLeft},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conRight",{get:function(){return this._conRight},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conTop",{get:function(){return this._conTop},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conBottom",{get:function(){return this._conBottom},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conCenterX",{get:function(){return this._conCenterX},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"conCenterY",{get:function(){return this._conCenterY},enumerable:!0,configurable:!0}),Object.defineProperty(AdContainer.prototype,"allAdIconRes",{get:function(){for(var t=[],e=0;e<this._contents.length;e++)this._contents[e]&&this._contents[e].resUrl&&(t=t.concat(this._contents[e].resUrls));return t},enumerable:!0,configurable:!0}),AdContainer}(),AdLoader=function(){function AdLoader(){}return AdLoader.load=function(t,e,n){return Laya.loader.load(t,e,n,null,1,AdLoader.cache)},AdLoader.cache=!0,AdLoader}(),AdIcon=function(t){function AdIcon(){var e=t.call(this)||this;return e.init(),e}return __extends(AdIcon,t),Object.defineProperty(AdIcon.prototype,"iconImg",{get:function(){return this._iconImg},enumerable:!0,configurable:!0}),AdIcon.prototype.init=function(){this.mouseEnabled=!0,this.mouseThrough=!1,this._iconImg=new Laya.Image,this.addChild(this._iconImg),this._iconImg.pos(0,0),this.clear()},AdIcon.prototype.clear=function(){this._isLoop=!1,this._playIndex=0,this.stopLoop(),this._iconImg.skin="",this._iconUrils=[],this.removeSelf()},AdIcon.prototype.setIcon=function(t,e,n){void 0===n&&(n=100),this._iconImg.size(t,e),this.size(t,e),this._interval=n},AdIcon.prototype.loadImages=function(t){this._iconUrils=t,this._iconUrils&&this._iconUrils.length>=1&&this.setSkin(this._iconUrils[0])},AdIcon.prototype.setSkin=function(t){this._iconImg&&(this._iconImg.skin=t)},AdIcon.prototype.play=function(t){void 0===t&&(t=!0),!this._iconUrils||this._iconUrils.length<=1||this._inPlay||(this._isLoop=t,this.startLoop())},AdIcon.prototype.startLoop=function(){this._inPlay=!0,this._playIndex=0,Laya.timer.loop(this._interval,this,this.onLoop)},AdIcon.prototype.stopLoop=function(){this._inPlay=!1,Laya.timer.clear(this,this.onLoop)},AdIcon.prototype.onLoop=function(){this._playIndex>=this._iconUrils.length&&(this._isLoop?this._playIndex=this._playIndex%this._iconUrils.length:this.stopLoop());var t=this._iconUrils[this._playIndex];this.setSkin(t),this._playIndex++},AdIcon.prototype.stop=function(){this._inPlay&&this.stopLoop()},AdIcon}(Laya.Sprite),AdClickHandler=function(){function AdClickHandler(){}return AdClickHandler.jumpApp=function(t,e,n,i,o,s){var a={appId:t,success:function(){console.log("跳转APP成功！"),wx.aldSendEvent&&wx.aldSendEvent("跳转小游戏成功",{appid:t,"广告位":n,"广告":i.adId}),zm.statistics.navigationConfirmStat(zm.LocationID.Vip,e,n,i.adId,i.order+1,i.effectType,zm.gameID()),zm.eventCenter.event(zm.events.EventJumpAppSuccess,{pageId:e}),o&&o.run()},fail:function(){console.log("跳转APP失败！"),zm.eventCenter.event(zm.events.EventJumpAppFail,{pageId:e}),s&&s.run()}},r=i?i.adId:0,h={};if(h.subgameid=zm.utils.adaptStatID(CustomAdConfig.PlatformId,zm.Stat_Offset),h.subuid=CustomAdConfig.UID,h.location_id=zm.LocationID.Vip,h.ad_page_id=e,h.advid=n,h.adid=r,i){var d=AdClickHandler.checkAdParam(i.param);AdClickHandler.parseAdParam(h,d),a.path=i.path}a.extraData=h,console.log("custom ad jump app",a),Laya.Browser.window.wx&&(Laya.Browser.window.wx.navigateToMiniProgram(a),wx.aldSendEvent&&wx.aldSendEvent("跳转小游戏",{appid:t,"广告位":n,"广告":i.adId}))},AdClickHandler.checkAdParam=function(t){return t&&t.length>0&&"?"==t[0]?t.substr(1,t.length-1):t},AdClickHandler.parseAdParam=function(t,e){if(e&&e.length>0)for(var n=e.split("&"),i=0;i<n.length;i++){var o=n[i];if(o&&o.length>0){var s=o.split("=");t[s[0]]=s[1]}}},AdClickHandler.showQRCode=function(t){var e=[t],n=Laya.Browser.window.wx;n&&n.previewImage({urls:e,success:function(){console.log("preview qrcode ok")}}),console.log("显示图片:",t)},AdClickHandler.openAd=function(t,e,n,i,o){if(t){switch(t.respondType){case AdRespondType.Jump:case AdRespondType.JumpTwice:case AdRespondType.Link:AdClickHandler.jumpApp(t.linkValue,e,n,t,i,o);break;case AdRespondType.QRCode:AdClickHandler.showQRCode(t.linkValue)}zm.statistics.navigationStat(zm.LocationID.Vip,e,n,t.adId,t.order+1,t.effectType,zm.gameID())}},AdClickHandler}(),AdReddotHelper=function(){function AdReddotHelper(){}return AdReddotHelper.addReddot=function(t,e,n,i){if(t&&t.parent&&(i&&i.effectType==EffectType.Reddot&&AdReddotHelper.getIconReddotState(e,n,i)==AdReddotHelper.Reddot_Show)){var o=AdReddotHelper.getDotImg();o.size(30,30),o.mouseEnabled=!1,o.skin=AdReddotHelper.dotUrl,o.anchorX=.5,o.anchorY=.5,o.pos(parseInt(t.x)+parseInt(t.width)-.5*o.width,parseInt(t.y)+.5*o.height),t.parent.addChild(o);var s=AdReddotHelper.getKey(e,n,i);AdReddotHelper.ReddotList[s]=o}},AdReddotHelper.updateReddotState=function(t,e,n){if(n&&n.effectType==EffectType.Reddot&&AdReddotHelper.getIconReddotState(t,e,n)==AdReddotHelper.Reddot_Show){AdReddotHelper.saveIconReddotState(t,e,n,AdReddotHelper.Reddot_Hide);var i=AdReddotHelper.getKey(t,e,n),o=AdReddotHelper.ReddotList[i];o&&AdReddotHelper.saveDotImg(o),AdReddotHelper.ReddotList[i]=null}},AdReddotHelper.getIconReddotState=function(t,e,n){var i=AdReddotHelper.getKey(t,e,n),o=Laya.LocalStorage.getItem(i);if(o&&o.length>0){var s=o.split(":"),a=parseInt(s[0]),r=parseInt(s[1]),h=new Date(r),d=new Date;if(h.getDay()==d.getDay())return a}return AdReddotHelper.saveIconReddotState(t,e,n,AdReddotHelper.Reddot_Show),AdReddotHelper.Reddot_Show},AdReddotHelper.saveIconReddotState=function(t,e,n,i){var o=AdReddotHelper.getKey(t,e,n),s=i+":"+Date.now();Laya.LocalStorage.setItem(o,s)},AdReddotHelper.getDotImg=function(){return 0==AdReddotHelper.ReddotPool.length&&AdReddotHelper.ReddotPool.push(new Laya.Image),AdReddotHelper.ReddotPool.pop()},AdReddotHelper.saveDotImg=function(t){t&&(t.removeSelf(),AdReddotHelper.ReddotPool.push(t))},AdReddotHelper.getKey=function(t,e,n){return AdReddotHelper.AdIconReddotKey+"_"+t+"_"+e+"_"+n.adId},Object.defineProperty(AdReddotHelper,"dotUrl",{get:function(){return CustomAdConfig.HOST+"reddot.png"},enumerable:!0,configurable:!0}),AdReddotHelper.AdIconReddotKey="AdIconReddotKey",AdReddotHelper.Reddot_Show=0,AdReddotHelper.Reddot_Hide=1,AdReddotHelper.ReddotPool=[],AdReddotHelper.ReddotList={},AdReddotHelper}(),AdElement=function(){function AdElement(){}return AdElement.prototype.initIcon=function(){this._icon=new AdIcon,this._icon.on(Laya.Event.CLICK,this,this.onClick)},AdElement.prototype.destroy=function(){this._icon&&(this._icon.off(Laya.Event.CLICK,this,this.onClick),this._icon.clear(),this._icon=null),this._clickCallback&&(this._clickCallback=null),this._pageId=0,this._containerId=0,this._content=null},Object.defineProperty(AdElement.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(AdElement.prototype,"adId",{get:function(){return this._content.adId},enumerable:!0,configurable:!0}),Object.defineProperty(AdElement.prototype,"effectType",{get:function(){return this._content.effectType},enumerable:!0,configurable:!0}),Object.defineProperty(AdElement.prototype,"order",{get:function(){return this._content.order},enumerable:!0,configurable:!0}),AdElement.prototype.setData=function(t,e,n,i,o,s,a){void 0===s&&(s=!0),t&&(this._pageId=i,this._containerId=o,this._content=t,this._canClick=s,this._clickCallback=a,this.initIcon(),this._icon.setIcon(e,n,this._content.interval),this._icon.loadImages(this._content.aniUrls),this._canClick&&AdReddotHelper.addReddot(this._icon.iconImg,this._pageId,this._containerId,this._content))},AdElement.prototype.onClick=function(){this._content&&this._canClick&&(AdReddotHelper.updateReddotState(this._pageId,this._containerId,this._content),AdClickHandler.openAd(this._content,this._pageId,this._containerId),this._clickCallback&&this._clickCallback.run())},AdElement.prototype.play=function(){this._icon.play()},AdElement.prototype.stop=function(){this._icon.stop()},AdElement.creatAdElement=function(){return 0==this._adElementPool.length&&(this._adElementPool[0]=new AdElement),this._adElementPool.pop()},AdElement.recoverAdElement=function(t){t&&t.destroy()},AdElement._adElementPool=[],AdElement}(),AdLantern=function(t){function AdLantern(){return t.call(this)||this}return __extends(AdLantern,t),Object.defineProperty(AdLantern.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),AdLantern.prototype.setUnit=function(t,e,n){n&&e&&(this.clear(),this._contentIdx=-1,this._pageId=t,this.visible=!0,this.mouseEnabled=!0,this.mouseThrough=!1,this._parentCon=n,this._conData=e,this._contents=this._conData.contents,this.loadAndShow())},AdLantern.prototype.clear=function(){this.off(Laya.Event.CLICK,this,this.onClick),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this.stopAnimation(),this._adElement&&(zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType),AdElement.recoverAdElement(this._adElement),this._adElement=null),Laya.timer.clear(this,this.onAdEnd),this._conData=null,this._curContentData=null,this._contents=[],this.anchorX=0,this.anchorY=0},AdLantern.prototype.setUnitPos=function(){switch(this.width=this._conData.conWidth,this.height=this._conData.conHeight,this.anchorX=.5,this.anchorY=.5,this._parentCon.addChildAt(this,this._parentCon.numChildren),this.x=void 0,this.y=void 0,this.centerX=void 0,this.centerY=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,this._conData.posType){case AdPosType.Normal:this.x=this._conData.conX,this.y=this._conData.conY;break;case AdPosType.Center:this.centerX=this._conData.conCenterX,this.centerY=this._conData.conCenterY;break;case AdPosType.LRTB:null!=this._conData.conLeft&&(this.left=this._conData.conLeft),null!=this._conData.conRight&&(this.right=this._conData.conRight),null!=this._conData.conTop&&(this.top=this._conData.conTop),null!=this._conData.conBottom&&(this.top=Laya.stage.height-this._conData.conBottom-this._conData.conHeight)}this._x=this._x+.5*this.width,this._y=this._y+.5*this.height},AdLantern.prototype.onClick=function(){this.loadAndShow()},AdLantern.prototype.loadAndShow=function(){Laya.timer.clear(this,this.onAdEnd);for(var t,e=0;e<this._contents.length&&(this._contentIdx=(this._contentIdx+1)%this._contents.length,!(t=this._contents[this._contentIdx]));)e++;e<this._contents.length&&(this._curContentData&&t.adId==this._curContentData.adId||(this._curContentData=t,AdLoader.load(this._curContentData.resUrls,laya.utils.Handler.create(this,this.onLoadRes))))},AdLantern.prototype.onLoadRes=function(){if(null!=this._parentCon&&null!=this._conData){switch(this._adElement?zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType):(this._adElement=AdElement.creatAdElement(),this.setUnitPos()),this.removeChildren(),this._adElement.setData(this._curContentData,this._conData.conWidth,this._conData.conHeight,this._pageId,this._conData.containerId,!0,laya.utils.Handler.create(this,this.onClick,null,!1)),this.addChild(this._adElement.icon),this._adElement.play(),zm.AdShowTime.instance.adShow(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType),this._conData.effectType){case AnimationType.Normal:break;case AnimationType.Shake:this.shake();break;case AnimationType.Blink:this.blink()}Laya.timer.once(1e3*this._curContentData.showTime,this,this.onAdEnd)}},AdLantern.prototype.onAdEnd=function(t){this.loadAndShow()},AdLantern.prototype.stopAnimation=function(){this.stopShake(),this.stopBlink()},AdLantern.prototype.shake=function(){this.stopShake(),this.turn=0,this.direction=1,Laya.timer.frameLoop(1,this,this.onShakeFrame)},AdLantern.prototype.stopShake=function(){Laya.timer.clear(this,this.shake),Laya.timer.clear(this,this.onShakeFrame),this.rotation=0},AdLantern.prototype.onShakeFrame=function(t){var e=this.direction*Math.min(5,CustomAdConfig.ShakeAnglePerMs*Laya.timer.delta),n=this.rotation+e;n*this.rotation<0&&this.turn++,this.turn>=CustomAdConfig.ShakeTurn?(this.stopShake(),Laya.timer.once(CustomAdConfig.ShakeBreakTime,this,this.shake)):(this.rotation=n,Math.abs(this.rotation)>CustomAdConfig.ShakeAngleLimit&&(this.direction=this.rotation-CustomAdConfig.ShakeAngleLimit>0?-1:1))},AdLantern.prototype.blink=function(){this.stopBlink(),this.direction=-1,this.turn=0,Laya.timer.frameLoop(1,this,this.onBlinkFrame)},AdLantern.prototype.stopBlink=function(){Laya.timer.clear(this,this.onBlinkFrame),Laya.timer.clear(this,this.blink),this.alpha=1},AdLantern.prototype.onBlinkFrame=function(t){var e=this.direction*Math.min(.1,CustomAdConfig.BlinkPerMs*Laya.timer.delta);console.log(CustomAdConfig.BlinkPerMs*Laya.timer.delta);var n=this.alpha+e;if(n>=1){if(n=1,this.direction=-1,this.turn++,this.turn>=CustomAdConfig.BlinkTurn)return this.stopBlink(),void Laya.timer.once(CustomAdConfig.BlinkBreakTime,this,this.blink)}else n<=CustomAdConfig.BlinkMinAlpha&&(n=CustomAdConfig.BlinkMinAlpha,this.direction=1);this.alpha=n},AdLantern}(Laya.View),AdMenu=function(t){function AdMenu(){return t.call(this)||this}return __extends(AdMenu,t),Object.defineProperty(AdMenu.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),AdMenu.prototype.setUnit=function(t,e,n){n&&e&&(this.clear(),this._pageId=t,this.visible=!1,this.mouseThrough=!0,this._parentCon=n,this._conData=e,this._contents=this._conData.contents,this._drawerType=this.getDrawerType(),this.loadAndShow())},AdMenu.prototype.clear=function(){this._conData&&this._contents&&this._contents.length>0&&this.adTimeHide(),this._conData=null,this._contents=[],this._iconPanel&&(this._iconPanel.removeChildren(),this._iconPanel.removeSelf(),this._iconPanel=null),this.clearElements(),this.off(Laya.Event.CLICK,this,this.onClick),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._isShow=!1,this._inMove=!1,this._dot&&Laya.timer.clear(this,this.dotEffect)},AdMenu.prototype.showAndHide=function(t){if(void 0===t&&(t=!0),!this._inMove){this._panel.centerX=void 0,this._panel.centerY=void 0,this._panel.left=void 0,this._panel.right=void 0,this._panel.top=void 0,this._panel.bottom=void 0,this._inMove=!0,this._isShow=t&&!this._isShow;var e=!t;switch(this._drawerType){case DrawerType.Menu_Top:this.movePos(e,this._panel.x,this._isShow?this._panel.y+this._bg.height:this._panel.y-this._bg.height);break;case DrawerType.Menu_Bottom:this.movePos(e,this._panel.x,this._isShow?this._panel.y-this._bg.height:this._panel.y+this._bg.height);break;case DrawerType.Menu_Left:this.movePos(e,this._isShow?0:-this._bg.width,this._panel.y);break;case DrawerType.Menu_Right:this.movePos(e,this._isShow?this._panel.x-this._bg.width:this._panel.x+this._bg.width,this._panel.y);break;case DrawerType.Menu_All:}this._dot.visible=!this._isShow,AdMenu.NeedSlide&&this._iconPanel&&(this.isHorizontal?this._iconPanel.hScrollBar.value=0:this._iconPanel.vScrollBar.value=0),this._isShow?this.adTimeShow():this.adTimeHide()}},AdMenu.prototype.movePos=function(t,e,n){if(this._more.skin=this._isShow?this.btnInUrl:this.btnOutUrl,this._mask.visible=this._isShow,t)this._panel.x=e,this._panel.y=n,this._inMove=!1,this.visible=!0;else var i=Laya.Tween.to(this._panel,{x:e,y:n},200,Laya.Ease.sineInOut,laya.utils.Handler.create(this,function(){this._inMove=!1,this.visible=!0,i.clear(),i=null}))},AdMenu.prototype.adTimeShow=function(){var t=this,e=zm.AdShowTime.instance,n=this._conData.containerId;this._contents.forEach(function(i){e.adShow(t._pageId,n,i.adId,i.order,i.effectType)})},AdMenu.prototype.adTimeHide=function(){var t=this,e=zm.AdShowTime.instance,n=this._conData.containerId;this._contents.forEach(function(i){e.adHide(t._pageId,n,i.adId,i.order,i.effectType)})},AdMenu.prototype.dotEffect=function(){this._dot&&this._dot.scale(2.3-this._dot.scaleX,2.3-this._dot.scaleY)},AdMenu.prototype.setMenuLayout=function(){this.size(Laya.stage.width+10,Laya.stage.height+10),this.pos(-5,-5),this._mask=new Laya.Sprite,this._mask.size(this.width,this.height),this._mask.pos(0,0),this._mask.visible=!0,this._mask.graphics.drawRect(0,0,this._mask.width,this._mask.height,"#000000"),this._mask.alpha=.1,this._mask.name=AdMenu.MaskName,this._mask.mouseEnabled=!0,this._mask.mouseThrough=!1,this.addChildAt(this._mask,0),this._panel=new Laya.Box,this._panel.name="containerBox",this._panel.mouseThrough=!0,this.addChildAt(this._panel,1),this._bg=new Laya.Image,this._bg.name="menubg",this._bg.skin=this.bgUrl,this._bg.sizeGrid=this.bgSizeGrid,this._bg.pos(0,0),this._panel.addChild(this._bg),this._title=new Laya.Image,this._title.mouseEnabled=!1,this._title.skin=this.titleUrl,this._title.size(AdMenu.TitleWidth,AdMenu.TitleHeight),this._panel.addChild(this._title);var t=this.layoutStyle;if(this._bg.width=AdMenu.CustomData.containerWidth?AdMenu.CustomData.containerWidth:Laya.stage.width*(2/3),AdMenu.AdIconWidth=(this._bg.width-2*AdMenu.BorderDiff-(t.x+1)*AdMenu.AdIconSpaceW)/t.x,AdMenu.AdIconHeight=AdMenu.AdIconWidth,this._bg.height=(AdMenu.AdIconSpaceH+AdMenu.AdIconHeight+AdMenu.AdIconTxtHeight)*t.y+AdMenu.BorderDiff+AdMenu.AdIconSpaceH+this._title.height+AdMenu.AdIconSpaceH,this._drawerType!=DrawerType.Menu_All){this._more=new Laya.Button,this._more.stateNum=1,this._more.mouseEnabled=!0,this._more.mouseThrough=!1,this._more.name=AdMenu.MoreName;var e=this.btnSizePt;this._more.size(e.x,e.y),this._more.skin=this.btnOutUrl,this._panel.addChild(this._more),this._dot=new Laya.Image,this._dot.mouseEnabled=!1,this._dot.skin=this.dotUrl,this._dot.anchorX=.5,this._dot.anchorY=.5,this._dot.pos(0,0),this._panel.addChild(this._dot),Laya.timer.loop(200,this,this.dotEffect)}switch(this._drawerType){case DrawerType.Menu_Top:this._more.pos(0,this._bg.height),this._panel.size(this._bg.width,this._bg.height+this._more.height);break;case DrawerType.Menu_Bottom:this._more.pos(0,0),this._bg.pos(0,this._more.height),this._panel.size(this._bg.width,this._bg.height+this._more.height);break;case DrawerType.Menu_Left:this._more.pos(this._bg.width,this.moreBtnDown?this._bg.height-this._more.height-20:20),this._panel.size(this._bg.width+this._more.width,this._bg.height);break;case DrawerType.Menu_Right:this._more.pos(0,this.moreBtnDown?this._bg.height-this._more.height-20:20),this._bg.pos(this._more.width,0),this._panel.size(this._bg.width+this._more.width,this._bg.height);break;case DrawerType.Menu_All:this._panel.size(this._bg.width,this._bg.height)}this._title.pos(.5*this._bg.width-.5*this._title.width,AdMenu.BorderDiff+AdMenu.AdIconSpaceH),this._dot.pos(this._more.x+this._more.width,this._more.y)},AdMenu.prototype.setUnitPos=function(){this.setMenuLayout(),this._parentCon.addChildAt(this,this._parentCon.numChildren),this._panel.centerX=void 0,this._panel.centerY=void 0,this._panel.left=void 0,this._panel.right=void 0,this._panel.top=void 0,this._panel.bottom=void 0,AdMenu.CustomData.pos?(this._panel.x=AdMenu.CustomData.pos.x,this._panel.y=AdMenu.CustomData.pos.y,this._panel.left=AdMenu.CustomData.pos.left,this._panel.right=AdMenu.CustomData.pos.right,this._panel.top=AdMenu.CustomData.pos.top,this._panel.bottom=AdMenu.CustomData.pos.bottom,this._panel.centerX=AdMenu.CustomData.pos.centerX,this._panel.centerY=AdMenu.CustomData.pos.centerY):(this._panel.left=0,this._panel.centerY=0),this.on(Laya.Event.CLICK,this,this.onClick)},AdMenu.prototype.onClick=function(t){var e=t.target.name;this._conData&&(e!=AdMenu.MoreName&&e!=AdMenu.MaskName||this.showAndHide())},AdMenu.prototype.loadAndShow=function(){this.loadBg()},AdMenu.prototype.loadBg=function(){var t=[{url:this.bgUrl,type:Laya.Loader.IMAGE},{url:this.dotUrl,type:Laya.Loader.IMAGE},{url:this.titleUrl,type:Laya.Loader.IMAGE},{url:this.btnOutUrl,type:Laya.Loader.IMAGE},{url:this.btnInUrl,type:Laya.Loader.IMAGE}];AdLoader.load(t,laya.utils.Handler.create(this,this.onLoadBgRes))},AdMenu.prototype.onLoadBgRes=function(){null!=this._parentCon&&null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.showAndHide(!1),this.loadAdIcons())},AdMenu.prototype.loadAdIcons=function(){AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdMenu.prototype.onLoadAdIcons=function(){if(this._pageId==CustomAdMgr.curPageId&&null!=this._parentCon&&null!=this._conData){this._iconPanel=new Laya.Panel,this._iconPanel.pos(this._bg.x+AdMenu.BorderDiff,this._bg.y+this._title.y+this._title.height+AdMenu.BorderDiff),this._iconPanel.size(this._bg.width-2*AdMenu.BorderDiff,this._bg.height-this._title.y-this._title.height-AdMenu.BorderDiff),this._panel.addChild(this._iconPanel),this._iconPanel.removeChildren(),this.clearElements(),AdMenu.NeedSlide&&(this.isHorizontal?(this._iconPanel.hScrollBarSkin="",this._iconPanel.hScrollBar.elasticBackTime=150,this._iconPanel.hScrollBar.elasticDistance=100):(this._iconPanel.vScrollBarSkin="",this._iconPanel.vScrollBar.elasticBackTime=150,this._iconPanel.vScrollBar.elasticDistance=100));for(var t=0,e=this.layoutStyle,n=Math.min(e.x*e.y,this._contents.length),i=0;i<n;i++){var o=this._contents[i];if(o&&o.resUrl){var s=new Laya.Sprite;s.mouseEnabled=!0;var a=AdElement.creatAdElement();this._curElements.push(a),a.setData(o,AdMenu.AdIconWidth,AdMenu.AdIconHeight,this._pageId,this._conData.containerId),a.icon.pos(0,0),s.addChild(a.icon),a.play();var r=new Laya.Label;r.font="SimHei",r.color="#1A1C28",r.fontSize=16,r.align="center",r.valign="bottom",r.size(AdMenu.AdIconWidth+20,AdMenu.AdIconTxtHeight),r.pos(-10,AdMenu.AdIconHeight),r.text=o.adName,s.addChild(r),s.size(AdMenu.AdIconWidth,AdMenu.AdIconHeight+AdMenu.AdIconTxtHeight);var h=this.isHorizontal?t%e.y:Math.floor(t/e.x),d=this.isHorizontal?Math.floor(t/e.y):t%e.x;s.x=AdMenu.AdIconSpaceW+d*(AdMenu.AdIconSpaceW+s.width),s.y=AdMenu.AdIconSpaceH+h*(AdMenu.AdIconSpaceH+s.height),this._iconPanel.addChild(s),t++}}}},AdMenu.prototype.clearElements=function(){if(this._curElements&&this._curElements.length>0)for(var t=this._curElements.length-1;t>=0;t--){var e=this._curElements[t];AdElement.recoverAdElement(e),this._curElements.splice(t,1)}this._curElements=[]},AdMenu.prototype.getDrawerType=function(){return AdMenu.CustomData.drawerType?AdMenu.CustomData.drawerType:DrawerType.Menu_Left},Object.defineProperty(AdMenu.prototype,"moreBtnDown",{get:function(){return!!AdMenu.CustomData.moreBtnDown&&AdMenu.CustomData.moreBtnDown},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"btnSizePt",{get:function(){return AdMenu.CustomData.btnSizePt?AdMenu.CustomData.btnSizePt:new Laya.Point(90,75)},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"btnOutUrl",{get:function(){return AdMenu.CustomData.btnOutSkin?AdMenu.CustomData.btnOutSkin:CustomAdConfig.HOST+"moregame0.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"btnInUrl",{get:function(){return AdMenu.CustomData.btnInSkin?AdMenu.CustomData.btnInSkin:CustomAdConfig.HOST+"moregame1.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"dotUrl",{get:function(){return AdMenu.CustomData.dotSkin?AdMenu.CustomData.dotSkin:CustomAdConfig.HOST+"reddot.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"titleUrl",{get:function(){return AdMenu.CustomData.titleSkin?AdMenu.CustomData.titleSkin:CustomAdConfig.HOST+"title.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"bgUrl",{get:function(){return AdMenu.CustomData.bgSkin?AdMenu.CustomData.bgSkin:CustomAdConfig.HOST+"all.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"bgSizeGrid",{get:function(){return AdMenu.CustomData.bgSizeGrid?AdMenu.CustomData.bgSizeGrid:"20,20,20,20,0"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"layoutStyle",{get:function(){return AdMenu.CustomData.layoutStyle?AdMenu.CustomData.layoutStyle:new Laya.Point(3,4)},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenu.prototype,"isHorizontal",{get:function(){return this._drawerType==DrawerType.Menu_Top||this._drawerType==DrawerType.Menu_Bottom||this._drawerType==DrawerType.Menu_All},enumerable:!0,configurable:!0}),AdMenu.CustomData={},AdMenu.AdIconWidth=80,AdMenu.AdIconHeight=80,AdMenu.AdIconTxtHeight=30,AdMenu.AdIconSpaceW=30,AdMenu.AdIconSpaceH=30,AdMenu.BorderDiff=5,AdMenu.TitleWidth=190,AdMenu.TitleHeight=40,AdMenu.MoreName="MoreImg",AdMenu.MaskName="MaskBg",AdMenu.NeedSlide=!1,AdMenu}(Laya.View),AdMenuNew=function(t){function AdMenuNew(){return t.call(this)||this}return __extends(AdMenuNew,t),Object.defineProperty(AdMenuNew.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),AdMenuNew.prototype.setUnit=function(t,e,n){n&&e&&(this.clear(),this._pageId=t,this.visible=!1,this.mouseThrough=!0,this._parentCon=n,this._conData=e,this._contents=this._conData.contents,this._drawerType=this.getDrawerType(),this.loadAndShow())},AdMenuNew.prototype.clear=function(){this._conData&&this._contents&&this._contents.length>0&&this.adTimeHide(),this._conData=null,this._contents=[],this._iconPanel&&(this._iconPanel.removeChildren(),this._iconPanel.removeSelf(),this._iconPanel=null),this.clearElements(),this.off(Laya.Event.CLICK,this,this.onClick),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._isShow=!1,this._inMove=!1,this._dot&&Laya.timer.clear(this,this.dotEffect)},AdMenuNew.prototype.showAndHide=function(t){if(void 0===t&&(t=!0),!this._inMove){this._panel.centerX=void 0,this._panel.centerY=void 0,this._panel.left=void 0,this._panel.right=void 0,this._panel.top=void 0,this._panel.bottom=void 0,this._inMove=!0,this._isShow=t&&!this._isShow;var e=!t;switch(this._drawerType){case DrawerType.Menu_Top:this.movePos(e,this._panel.x,this._isShow?this._panel.y+this._bg.height:this._panel.y-this._bg.height);break;case DrawerType.Menu_Bottom:this.movePos(e,this._panel.x,this._isShow?this._panel.y-this._bg.height:this._panel.y+this._bg.height);break;case DrawerType.Menu_Left:this.movePos(e,this._isShow?0:-this._bg.width,this._panel.y);break;case DrawerType.Menu_Right:this.movePos(e,this._isShow?this._panel.x-this._bg.width:this._panel.x+this._bg.width,this._panel.y);break;case DrawerType.Menu_All:}this._dot.visible=!this._isShow,AdMenuNew.NeedSlide&&this._iconPanel&&(this.isHorizontal?this._iconPanel.hScrollBar.value=0:this._iconPanel.vScrollBar.value=0),this._isShow?this.adTimeShow():this.adTimeHide()}},AdMenuNew.prototype.movePos=function(t,e,n){if(this._more.skin=this._isShow?this.btnInUrl:this.btnOutUrl,this._mask.visible=this._isShow,t)this._panel.x=e,this._panel.y=n,this._inMove=!1,this.visible=!0;else var i=Laya.Tween.to(this._panel,{x:e,y:n},200,Laya.Ease.sineInOut,laya.utils.Handler.create(this,function(){this._inMove=!1,this.visible=!0,i.clear(),i=null}))},AdMenuNew.prototype.adTimeShow=function(){var t=this,e=zm.AdShowTime.instance,n=this._conData.containerId;this._contents.forEach(function(i){e.adShow(t._pageId,n,i.adId,i.order,i.effectType)})},AdMenuNew.prototype.adTimeHide=function(){var t=this,e=zm.AdShowTime.instance,n=this._conData.containerId;this._contents.forEach(function(i){e.adHide(t._pageId,n,i.adId,i.order,i.effectType)})},AdMenuNew.prototype.dotEffect=function(){this._dot&&this._dot.scale(2.3-this._dot.scaleX,2.3-this._dot.scaleY)},AdMenuNew.prototype.setMenuLayout=function(){this.size(Laya.stage.width+10,Laya.stage.height+10),this.pos(-5,-5),this._mask=new Laya.Sprite,this._mask.size(this.width,this.height),this._mask.pos(0,0),this._mask.visible=!0,this._mask.graphics.drawRect(0,0,this._mask.width,this._mask.height,"#000000"),this._mask.alpha=.1,this._mask.name=AdMenuNew.MaskName,this._mask.mouseEnabled=!0,this._mask.mouseThrough=!1,this.addChildAt(this._mask,0),this._panel=new Laya.Box,this._panel.name="containerBox",this._panel.mouseThrough=!0,this.addChildAt(this._panel,1),this._bg=new Laya.Image,this._bg.name="menubg",this._bg.skin=this.bgUrl,this._bg.sizeGrid=this.bgSizeGrid,this._bg.pos(0,0),this._panel.addChild(this._bg);var t=this.layoutStyle;if(this._bg.width=AdMenuNew.CustomData.containerWidth?AdMenuNew.CustomData.containerWidth:Laya.stage.width-80,AdMenuNew.AdIconWidth=(this._bg.width-2*AdMenuNew.BorderDiff-(t.x+1)*AdMenuNew.AdIconSpaceW)/t.x,AdMenuNew.AdIconHeight=AdMenuNew.AdIconWidth,this._bg.height=(AdMenuNew.AdIconSpaceH+AdMenuNew.AdIconHeight)*t.y+2*AdMenuNew.BorderDiff+AdMenuNew.AdIconSpaceH,this._drawerType!=DrawerType.Menu_All){this._more=new Laya.Button,this._more.stateNum=1,this._more.mouseEnabled=!0,this._more.mouseThrough=!1,this._more.name=AdMenuNew.MoreName;var e=this.btnSizePt;this._more.size(e.x,e.y),this._more.skin=this.btnOutUrl,this._panel.addChild(this._more),this._dot=new Laya.Image,this._dot.mouseEnabled=!1,this._dot.skin=this.dotUrl,this._dot.anchorX=.5,this._dot.anchorY=.5,this._dot.pos(0,0),this._panel.addChild(this._dot),Laya.timer.loop(200,this,this.dotEffect)}switch(this._drawerType){case DrawerType.Menu_Top:this._more.pos(0,this._bg.height),this._panel.size(this._bg.width,this._bg.height+this._more.height);break;case DrawerType.Menu_Bottom:this._more.pos(0,0),this._bg.pos(0,this._more.height),this._panel.size(this._bg.width,this._bg.height+this._more.height);break;case DrawerType.Menu_Left:this._more.pos(this._bg.width,this.moreBtnDown?this._bg.height-this._more.height-20:20),this._panel.size(this._bg.width+this._more.width,this._bg.height);break;case DrawerType.Menu_Right:this._more.pos(0,this.moreBtnDown?this._bg.height-this._more.height-20:20),this._bg.pos(this._more.width,0),this._panel.size(this._bg.width+this._more.width,this._bg.height);break;case DrawerType.Menu_All:this._panel.size(this._bg.width,this._bg.height)}this._dot.pos(this._more.x+this._more.width,this._more.y)},AdMenuNew.prototype.setUnitPos=function(){this.setMenuLayout(),this._parentCon.addChildAt(this,this._parentCon.numChildren),this._panel.centerX=void 0,this._panel.centerY=void 0,this._panel.left=void 0,this._panel.right=void 0,this._panel.top=void 0,this._panel.bottom=void 0,AdMenuNew.CustomData.pos?(this._panel.x=AdMenuNew.CustomData.pos.x,this._panel.y=AdMenuNew.CustomData.pos.y,this._panel.left=AdMenuNew.CustomData.pos.left,this._panel.right=AdMenuNew.CustomData.pos.right,this._panel.top=AdMenuNew.CustomData.pos.top,this._panel.bottom=AdMenuNew.CustomData.pos.bottom,this._panel.centerX=AdMenuNew.CustomData.pos.centerX,this._panel.centerY=AdMenuNew.CustomData.pos.centerY):(this._panel.left=0,this._panel.centerY=0),this.on(Laya.Event.CLICK,this,this.onClick)},AdMenuNew.prototype.onClick=function(t){var e=t.target.name;this._conData&&(e!=AdMenuNew.MoreName&&e!=AdMenuNew.MaskName||this.showAndHide())},AdMenuNew.prototype.loadAndShow=function(){this.loadBg()},AdMenuNew.prototype.loadBg=function(){var t=[{url:this.bgUrl,type:Laya.Loader.IMAGE},{url:this.dotUrl,type:Laya.Loader.IMAGE},{url:this.btnOutUrl,type:Laya.Loader.IMAGE},{url:this.btnInUrl,type:Laya.Loader.IMAGE}];AdLoader.load(t,laya.utils.Handler.create(this,this.onLoadBgRes))},AdMenuNew.prototype.onLoadBgRes=function(){null!=this._parentCon&&null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.showAndHide(!1),this.loadAdIcons())},AdMenuNew.prototype.loadAdIcons=function(){AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdMenuNew.prototype.onLoadAdIcons=function(){if(this._pageId==CustomAdMgr.curPageId&&null!=this._parentCon&&null!=this._conData){this._iconPanel=new Laya.Panel,this._iconPanel.pos(this._bg.x+AdMenuNew.BorderDiff,this._bg.y+AdMenuNew.BorderDiff),this._iconPanel.size(this._bg.width-2*AdMenuNew.BorderDiff,this._bg.height-2*AdMenuNew.BorderDiff),this._panel.addChild(this._iconPanel),this._iconPanel.removeChildren(),this.clearElements(),AdMenuNew.NeedSlide&&(this.isHorizontal?(this._iconPanel.hScrollBarSkin="",this._iconPanel.hScrollBar.elasticBackTime=150,this._iconPanel.hScrollBar.elasticDistance=100):(this._iconPanel.vScrollBarSkin="",this._iconPanel.vScrollBar.elasticBackTime=150,this._iconPanel.vScrollBar.elasticDistance=100));for(var t=0,e=this.layoutStyle,n=this._contents.length,i=0;i<n;i++){var o=this._contents[i];if(o&&o.resUrl){var s=new Laya.Sprite;s.mouseEnabled=!0;var a=AdElement.creatAdElement();this._curElements.push(a),a.setData(o,AdMenuNew.AdIconWidth,AdMenuNew.AdIconHeight,this._pageId,this._conData.containerId),a.icon.pos(0,0),s.addChild(a.icon),a.play();var r=new Laya.Sprite;r.size(AdMenuNew.AdIconWidth,AdMenuNew.AdIconTxtHeight+5),r.graphics.drawRect(0,0,r.width,r.height,"#000000"),r.alpha=.5,r.pos(0,AdMenuNew.AdIconHeight-r.height),s.addChild(r);var h=new Laya.Label;h.font="SimHei",h.color="#FFFFFF",h.fontSize=20,h.align="center",h.valign="middle",h.size(AdMenuNew.AdIconWidth+20,AdMenuNew.AdIconTxtHeight),h.pos(-10,AdMenuNew.AdIconHeight-AdMenuNew.AdIconTxtHeight),h.text=o.adName,s.addChild(h),s.size(AdMenuNew.AdIconWidth,AdMenuNew.AdIconHeight);var d=this.isHorizontal?t%e.y:Math.floor(t/e.x),u=this.isHorizontal?Math.floor(t/e.y):t%e.x;if(s.x=AdMenuNew.AdIconSpaceW+u*(AdMenuNew.AdIconSpaceW+s.width),s.y=AdMenuNew.AdIconSpaceH+d*(AdMenuNew.AdIconSpaceH+s.height),this._iconPanel.addChild(s),t++,i+1==n){var l=new Laya.Sprite;l.size(AdMenuNew.AdIconSpaceW,AdMenuNew.AdIconSpaceH),l.pos(0,s.y+s.height),this._iconPanel.addChild(l)}}}}},AdMenuNew.prototype.clearElements=function(){if(this._curElements&&this._curElements.length>0)for(var t=this._curElements.length-1;t>=0;t--){var e=this._curElements[t];AdElement.recoverAdElement(e),this._curElements.splice(t,1)}this._curElements=[]},AdMenuNew.prototype.getDrawerType=function(){return AdMenuNew.CustomData.drawerType?AdMenuNew.CustomData.drawerType:DrawerType.Menu_Left},Object.defineProperty(AdMenuNew.prototype,"moreBtnDown",{get:function(){return!!AdMenuNew.CustomData.moreBtnDown&&AdMenuNew.CustomData.moreBtnDown},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"btnSizePt",{get:function(){return AdMenuNew.CustomData.btnSizePt?AdMenuNew.CustomData.btnSizePt:new Laya.Point(55,66)},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"btnOutUrl",{get:function(){return AdMenuNew.CustomData.btnOutSkin?AdMenuNew.CustomData.btnOutSkin:CustomAdConfig.HOST+"moregame_new00.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"btnInUrl",{get:function(){return AdMenuNew.CustomData.btnInSkin?AdMenuNew.CustomData.btnInSkin:CustomAdConfig.HOST+"moregame_new01.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"dotUrl",{get:function(){return AdMenuNew.CustomData.dotSkin?AdMenuNew.CustomData.dotSkin:CustomAdConfig.HOST+"reddot.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"bgUrl",{get:function(){return AdMenuNew.CustomData.bgSkin?AdMenuNew.CustomData.bgSkin:CustomAdConfig.HOST+"all_new00.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"bgSizeGrid",{get:function(){return AdMenuNew.CustomData.bgSizeGrid?AdMenuNew.CustomData.bgSizeGrid:"20,20,20,20,0"},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"layoutStyle",{get:function(){return AdMenuNew.CustomData.layoutStyle?AdMenuNew.CustomData.layoutStyle:new Laya.Point(3,3)},enumerable:!0,configurable:!0}),Object.defineProperty(AdMenuNew.prototype,"isHorizontal",{get:function(){return this._drawerType==DrawerType.Menu_Top||this._drawerType==DrawerType.Menu_Bottom||this._drawerType==DrawerType.Menu_All},enumerable:!0,configurable:!0}),AdMenuNew.CustomData={},AdMenuNew.AdIconWidth=80,AdMenuNew.AdIconHeight=80,AdMenuNew.AdIconTxtHeight=30,AdMenuNew.AdIconSpaceW=25,AdMenuNew.AdIconSpaceH=25,AdMenuNew.BorderDiff=5,AdMenuNew.MoreName="MoreImg",AdMenuNew.MaskName="MaskBg",AdMenuNew.NeedSlide=!0,AdMenuNew}(Laya.View),AdGuess=function(t){function AdGuess(){var e=t.call(this)||this;return e.CustomeData={},e}return __extends(AdGuess,t),Object.defineProperty(AdGuess.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"guessType",{get:function(){return GuessType.Horizontal},enumerable:!0,configurable:!0}),AdGuess.prototype.setUnit=function(t,e,n,i){void 0===i&&(i={}),n&&e&&(this.CustomeData=i,this.clear(),this._pageId=t,this.visible=!1,this.mouseThrough=!0,this._parentCon=n,this._conData=e,this._contents=this._conData.contents,this._showCount=0,this._realSpaceW=AdGuess.AdIconSpaceW,this._realSpaceH=AdGuess.AdIconSpaceH,AdGuess.AdIconTxtHeight=this.needName?AdGuess.AdIconTxtHeight:0,this.loadAndShow())},AdGuess.prototype.clear=function(){this._iconPanel&&(this._iconPanel.off(Laya.Event.MOUSE_DOWN,this,this.MouseDown),this._iconPanel.off(Laya.Event.MOUSE_UP,this,this.MouseUp),this._iconPanel.off(Laya.Event.MOUSE_OUT,this,this.MouseUp),this._iconPanel.removeChildren(),this._iconPanel.removeSelf(),this._iconPanel=null),this.clearElements(),this.stopRoll(),Laya.timer.clear(this,this.onAdSwitch),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._conData=null,this._contents=[],this._curContents=[]},AdGuess.prototype.setMenuLayout=function(){this._bg=new Laya.Image,this._bg.name="menubg",this._bg.skin=this.bgUrl,this._bg.sizeGrid=this.bgSizeGrid,this._bg.pos(0,0),this.addChild(this._bg),this._bg.width=this.containerWidth,this._bg.height=this.containerHeight,this.size(this._bg.width,this._bg.height),AdGuess.AdIconWidth=(this._bg.width-2*this.borderDiffWidth-(this.iconNum+1)*AdGuess.AdIconSpaceW-this.offSetLeft)/this.iconNum,AdGuess.AdIconHeight=this._bg.height-2*this.borderDiffHeight-2*AdGuess.AdIconSpaceH-this.offSetTop-AdGuess.AdIconTxtHeight;var t=Math.min(AdGuess.AdIconWidth,AdGuess.AdIconHeight),e=AdGuess.AdIconWidth-t;AdGuess.AdIconWidth=AdGuess.AdIconHeight=t,e>0?this._realSpaceW=(this._bg.width-2*this.borderDiffWidth-this.offSetLeft-this.iconNum*AdGuess.AdIconWidth)/(this.iconNum+1):this._realSpaceH=(this._bg.height-2*this.borderDiffHeight-AdGuess.AdIconHeight-this.offSetTop-AdGuess.AdIconTxtHeight)/2},AdGuess.prototype.setUnitPos=function(){this.setMenuLayout(),this._parentCon.addChildAt(this,this._parentCon.numChildren),this.centerX=void 0,this.centerY=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,this.CustomeData.pos?(this.x=this.CustomeData.pos.x,this.y=this.CustomeData.pos.y,this.left=this.CustomeData.pos.left,this.right=this.CustomeData.pos.right,this.top=this.CustomeData.pos.top,this.bottom=this.CustomeData.pos.bottom,this.centerX=this.CustomeData.pos.centerX,this.centerY=this.CustomeData.pos.centerY):(this.centerX=0,this.centerY=300)},AdGuess.prototype.loadAndShow=function(){this.loadBg()},AdGuess.prototype.loadBg=function(){var t=[{url:this.bgUrl,type:Laya.Loader.IMAGE}];AdLoader.load(t,laya.utils.Handler.create(this,this.onLoadBgRes))},AdGuess.prototype.onLoadBgRes=function(){null!=this._parentCon&&null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.loadAdIcons())},AdGuess.prototype.loadAdIcons=function(){AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdGuess.prototype.onLoadAdIcons=function(){if(this._pageId==CustomAdMgr.curPageId&&null!=this._parentCon&&null!=this._conData&&(this._iconPanel||(this._iconPanel=new Laya.Panel,this._iconPanel.pos(this._bg.x+this.borderDiffWidth+this.offSetLeft,this._bg.y+this.borderDiffHeight+this.offSetTop),this._iconPanel.size(this._bg.width-2*this.borderDiffWidth-this.offSetLeft,this._bg.height-2*this.borderDiffHeight-this.offSetTop),this.addChild(this._iconPanel)),this._iconPanel.removeChildren(),this.clearElements(),this.autoScroll))switch(AdGuess.AdAnimationType){case AdGuessAnimationType.Switch:this.showSwitchAd();break;case AdGuessAnimationType.Roll:this.showRollAd()}},AdGuess.prototype.showRollAd=function(){if(this._curContents=this._contents.concat(),this.adIconLayout(),this._curContents.length>this.iconNum){var t=this._iconPanel.getChildAt(this.iconNum-1),e=t.x+t.width,n=this._iconPanel.getChildAt(this._curContents.length-1),i=n.x+n.width;this._rollValueMax=i-e+this._realSpaceW,this._rollValue=0,this._iconPanel.hScrollBarSkin="",this._iconPanel.hScrollBar.setScroll(0,this._rollValueMax,this._rollValue),this._iconPanel.hScrollBar.changeHandler=new Laya.Handler(this,this.onRollChange),this._iconPanel.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown),this._iconPanel.on(Laya.Event.MOUSE_UP,this,this.MouseUp),this._iconPanel.on(Laya.Event.MOUSE_OUT,this,this.MouseUp),this.startRoll()}},AdGuess.prototype.MouseDown=function(){this.stopRoll()},AdGuess.prototype.MouseUp=function(){this.startRoll(),this._iconPanel.hScrollBar.stopScroll()},AdGuess.prototype.onRollChange=function(t){this._rollValue=t},AdGuess.prototype.startRoll=function(){Laya.timer.clear(this,this.onAdRoll),Laya.timer.frameLoop(1,this,this.onAdRoll)},AdGuess.prototype.stopRoll=function(){Laya.timer.clear(this,this.onAdRoll)},AdGuess.prototype.onAdRoll=function(){var t=Math.min(1,CustomAdConfig.AdRollPerMs*Laya.timer.delta);this._rollValue>=this._rollValueMax?this._rollInterval=-1:this._rollValue<=0&&(this._rollInterval=1),t=this._rollInterval*t,this._rollValue=Math.min(this._rollValueMax,this._rollValue+t),this._rollValue=Math.max(0,this._rollValue),this._iconPanel.hScrollBar.setScroll(0,this._rollValueMax,this._rollValue)},AdGuess.prototype.showSwitchAd=function(){this._curContents=[],this._contents.length>this.iconNum?(Laya.timer.once(CustomAdConfig.AdSwitchTime,this,this.onAdSwitch),this._curContents=this.getShowContents()):this._curContents=this._curContents.concat(this._contents),this.adIconLayout()},AdGuess.prototype.adIconLayout=function(){for(var t=0;t<this._curContents.length;t++){var e=this._curContents[t];if(e&&e.resUrl){var n=new Laya.Sprite;n.mouseEnabled=!0;var i=AdElement.creatAdElement();if(this._curElements.push(i),i.setData(e,AdGuess.AdIconWidth,AdGuess.AdIconHeight,this._pageId,this._conData.containerId),i.icon.pos(0,0),n.addChild(i.icon),i.play(),this.needName){var o=new Laya.Label,s=.7*this._realSpaceW;o.font="SimHei",o.color=this.fontColor,o.align="center",o.valign="bottom",o.size(AdGuess.AdIconWidth+s,AdGuess.AdIconTxtHeight),o.fontSize=20*o.width/120,o.pos(-.5*s,AdGuess.AdIconHeight),o.overflow=Laya.Text.HIDDEN,o.text=e.adName,n.addChild(o)}if(n.size(AdGuess.AdIconWidth,AdGuess.AdIconHeight+AdGuess.AdIconTxtHeight),n.x=this._realSpaceW+t*(this._realSpaceW+n.width),n.y=this._realSpaceH,this._iconPanel.addChild(n),zm.AdShowTime.instance.adShow(this._pageId,this._conData.containerId,e.adId,e.order,e.effectType),t+1==this._contents.length){var a=new Laya.Sprite;a.size(this._realSpaceW,this._realSpaceH),a.pos(n.x+n.width,n.y),this._iconPanel.addChild(a)}}}this.visible=!0},AdGuess.prototype.onAdSwitch=function(){Laya.timer.clear(this,this.onAdSwitch),this.onLoadAdIcons()},AdGuess.prototype.getShowContents=function(){for(var t=[],e=0;e<this.iconNum;e++)t.push(this._contents[this._showCount]),this._showCount=++this._showCount%this._contents.length;return t},AdGuess.prototype.clearElements=function(){if(this._curElements&&this._curElements.length>0)for(var t=this._curElements.length-1;t>=0;t--){var e=this._curElements[t];zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,e.adId,e.order,e.effectType),AdElement.recoverAdElement(e),this._curElements.splice(t,1)}this._curElements=[]},Object.defineProperty(AdGuess.prototype,"isDefauleBg",{get:function(){return this.bgUrl==CustomAdConfig.HOST+"guessbg4.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"needName",{get:function(){return null==this.CustomeData.needName||this.CustomeData.needName},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"borderDiffWidth",{get:function(){return null==this.CustomeData.borderDiffWidth?AdGuess.BorderDiffWidth:this.CustomeData.borderDiffWidth},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"borderDiffHeight",{get:function(){return null==this.CustomeData.borderDiffHeight?AdGuess.BorderDiffHeight:this.CustomeData.borderDiffHeight},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"bgUrl",{get:function(){return this.CustomeData.bgSkin?this.CustomeData.bgSkin:CustomAdConfig.HOST+"guessbg4.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"bgSizeGrid",{get:function(){return this.CustomeData.bgSizeGrid&&this.CustomeData.bgSkin?this.CustomeData.bgSizeGrid:"0,100,0,100,0"},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"iconNum",{get:function(){return this.isDefauleBg?5:this.CustomeData.iconNum?this.CustomeData.iconNum:5},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"containerWidth",{get:function(){return this.isDefauleBg?Laya.stage.width:this.CustomeData.containerWidth?this.CustomeData.containerWidth:Laya.stage.width},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"containerHeight",{get:function(){return this.CustomeData.containerHeight?this.CustomeData.containerHeight:150},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"offSetLeft",{get:function(){return this.CustomeData.offSetLeft?this.CustomeData.offSetLeft:0},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"offSetTop",{get:function(){return this.CustomeData.offSetTop?this.CustomeData.offSetTop:0},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"fontColor",{get:function(){return this.CustomeData.fontColor?this.CustomeData.fontColor:"#f0f0f0"},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuess.prototype,"autoScroll",{get:function(){return null==this.CustomeData.autoScroll||this.CustomeData.autoScroll},enumerable:!0,configurable:!0}),AdGuess.AdIconWidth=80,AdGuess.AdIconHeight=80,AdGuess.AdIconTxtHeight=25,AdGuess.AdIconSpaceW=15,AdGuess.AdIconSpaceH=1,AdGuess.BorderDiffWidth=15,AdGuess.BorderDiffHeight=6,AdGuess.AdAnimationType=AdGuessAnimationType.Roll,AdGuess}(Laya.View),AdGuessScroll=function(t){function AdGuessScroll(){var e=t.call(this)||this;return e.CustomeData={},e}return __extends(AdGuessScroll,t),Object.defineProperty(AdGuessScroll.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"guessType",{get:function(){return GuessType.Vertical},enumerable:!0,configurable:!0}),AdGuessScroll.prototype.setUnit=function(t,e,n,i){if(void 0===i&&(i={}),e){this.CustomeData=i;var o=this.CustomeData.verticalCon;if(o||(o=n),o){var s=this.CustomeData.scrollType?this.CustomeData.scrollType:0;this.isVertical=0==s,this.itemWidth=this.CustomeData.itemWidth?this.CustomeData.itemWidth:120,this.itemHeight=this.CustomeData.itemHeight?this.CustomeData.itemHeight:120,this.spaceX=this.CustomeData.spaceX?this.CustomeData.spaceX:5,this.spaceY=this.CustomeData.spaceY?this.CustomeData.spaceY:20,AdGuessScroll.AdIconTxtHeight=this.itemHeight/6,this.realItemHeight=this.needName?this.itemHeight+AdGuessScroll.AdIconTxtHeight:this.itemHeight,console.log("this.realItemHeight",this.realItemHeight),this.clear(),this._pageId=t,this._conData=e,this.panel=new Laya.Panel,this.panel.width=o.width,this.panel.height=o.height,this.addChild(this.panel),this.isVertical?(this.panel.vScrollBarSkin="",this.scrollBar=this.panel.vScrollBar):(this.panel.hScrollBarSkin="",this.scrollBar=this.panel.hScrollBar),o.addChild(this),AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))}}},AdGuessScroll.prototype.clear=function(){Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.timer.clear(this,this.setRollState),Laya.timer.clear(this,this.onLoop),this.clearContents(),this.removeSelf(),this.removeChildren(),this.panel=null,this.graphics.clear()},AdGuessScroll.prototype.clearContents=function(){if(this.contents){for(var t=this.contents.length,e=0;e<t;e++){var n=this.contents[e];zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,n.adId,n.order,n.effectType)}this.contents=null}},AdGuessScroll.prototype.onLoadAdIcons=function(){if(this.panel){var t=[];this.contents=t;for(var e=0,n=this._conData.contents.length;e<n;e++){var i=this._conData.contents[e];i&&i.resUrl&&t.push(i)}var o=t.length;if(this.isVertical){var s=Math.floor(this.width/this.itemWidth);s=Math.max(s,1);var a=this.needBorder?s+1:s-1,r=s<=1?0:(this.width-s*this.itemWidth)/a;for(e=0;e<o;e++){var h=t[e],d=(m=e-(g=Math.floor(e/s))*s)*(this.itemWidth+r)+(this.needBorder?r:0),u=(this.realItemHeight+this.spaceY)*g;this.addItem(h,d,u)}var l=Math.ceil(o/s);this.totalOffset=Math.max(0,l*(this.realItemHeight+this.spaceY)-this.spaceY-this.height)}else{var c=Math.floor(this.height/this.realItemHeight);c=Math.max(c,1);var p=this.needBorder?c+1:c-1,f=c<=1?0:(this.height-c*this.realItemHeight)/p;for(e=0;e<o;e++){h=t[e];var m,g=e-(m=Math.floor(e/c))*c;d=(this.realItemHeight+this.spaceX)*m,u=g*(this.realItemHeight+f)+(this.needBorder?f:0);this.addItem(h,d,u)}var _=Math.ceil(o/c);this.totalOffset=Math.max(0,_*(this.itemWidth+this.spaceX)-this.spaceX-this.width)}this.scrollBar.value=0,this.offset=AdGuessScroll.RollValue,this.setRollState()}},AdGuessScroll.prototype.addItem=function(t,e,n){var i=new Laya.Sprite;i.mouseEnabled=!0,i.size(this.itemWidth,this.realItemHeight),i.x=e,i.y=n,this.panel.addChild(i);var o=AdElement.creatAdElement();if(this.skinBgItem){var s=new Laya.Image;s.size(this.itemWidth,this.realItemHeight),s.sizeGrid=this.itemBgSizeGrid,s.skin=this.skinBgItem,i.addChildAt(s,0),o.setData(t,this.itemWidth-2*this.itemBgContentWidthOffset,this.itemHeight-2*this.itemBgContentHeightOffset,this._pageId,this._conData.containerId),o.icon.pos(this.itemBgContentWidthOffset,this.itemBgContentHeightOffset)}else o.setData(t,this.itemWidth,this.itemHeight,this._pageId,this._conData.containerId),o.icon.pos(0,0);if(i.addChild(o.icon),o.play(),this.needName){var a=new Laya.Label,r=Math.floor(this.itemWidth/6);a.font="SimHei",a.color=this.fontColor,a.align="center",a.valign="bottom",a.size(this.itemWidth+r,AdGuessScroll.AdIconTxtHeight),a.pos(-.5*r,this.itemHeight),a.fontSize=Math.floor(a.height),a.overflow=Laya.Text.HIDDEN,a.text=t.adName,i.addChild(a)}zm.AdShowTime.instance.adShow(this._pageId,this._conData.containerId,t.adId,t.order,t.effectType)},AdGuessScroll.prototype.setRollState=function(){this.autoScroll&&(this.totalOffset>0&&(this.tempValue=this.scrollBar.value,Laya.timer.clear(this,this.onLoop),Laya.timer.loop(25,this,this.onLoop)),this.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown))},AdGuessScroll.prototype.onLoop=function(){this.tempValue+=this.offset;var t=Math.floor(this.tempValue);this.offset<0&&t<=0?(t=0,this.tempValue=0,this.offset=AdGuessScroll.RollValue):this.offset>0&&t>=this.totalOffset&&(t=this.totalOffset,this.tempValue=this.totalOffset,this.offset=-AdGuessScroll.RollValue),this.scrollBar.value=t},AdGuessScroll.prototype.onMouseDown=function(){this.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.timer.clear(this,this.setRollState),Laya.timer.clear(this,this.onLoop),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)},AdGuessScroll.prototype.onMouseUp=function(){Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.scrollBar.stopScroll(),this.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.timer.once(1e3,this,this.setRollState)},Object.defineProperty(AdGuessScroll.prototype,"needName",{get:function(){return null!=this.CustomeData.needName&&this.CustomeData.needName},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"fontColor",{get:function(){return null==this.CustomeData.fontColor?"#1A1C28":this.CustomeData.fontColor},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"autoScroll",{get:function(){return null==this.CustomeData.autoScroll||this.CustomeData.autoScroll},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"needBorder",{get:function(){return null==this.CustomeData.needBorder||this.CustomeData.needBorder},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"skinBgItem",{get:function(){return null==this.CustomeData.skinBgItem?null:this.CustomeData.skinBgItem},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"itemBgSizeGrid",{get:function(){return null==this.CustomeData.itemBgSizeGrid?"0,0,0,0,0":this.CustomeData.itemBgSizeGrid},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"itemBgContentWidthOffset",{get:function(){return null==this.CustomeData.itemBgContentWidthOffset?0:this.CustomeData.itemBgContentWidthOffset},enumerable:!0,configurable:!0}),Object.defineProperty(AdGuessScroll.prototype,"itemBgContentHeightOffset",{get:function(){return null==this.CustomeData.itemBgContentHeightOffset?0:this.CustomeData.itemBgContentHeightOffset},enumerable:!0,configurable:!0}),AdGuessScroll.RollValue=.4,AdGuessScroll.AdIconTxtHeight=20,AdGuessScroll}(Laya.View),AdFactory=function(){function AdFactory(){}return AdFactory.getAdGuess=function(t){switch(t){case GuessType.Horizontal:return new AdGuess;case GuessType.Vertical:return new AdGuessScroll;default:throw new Error("未知guess类型: "+t)}},AdFactory}(),AdPendant=function(t){function AdPendant(){return t.call(this)||this}return __extends(AdPendant,t),AdPendant.clearPageData=function(){AdPendant.PendantNum=0,AdPendant.PendantCount=0},Object.defineProperty(AdPendant.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),AdPendant.prototype.setUnit=function(t,e,n){n&&e&&(this.clear(),this._pageId=t,this.visible=!0,this.mouseEnabled=!0,this.mouseThrough=!1,this._parentCon=n,this._conData=e,this._contents=this._conData.contents,this.loadAndShow())},AdPendant.prototype.clear=function(){this._pendantWidth=0,this._pendantHeight=0,this.removeSelf(),this.removeChildren(),this.graphics.clear(),this.stopAnimation(),this._adElement&&(zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType),AdElement.recoverAdElement(this._adElement),this._adElement=null),this._conData=null,this._curContentData=null,this._contents=[]},AdPendant.prototype.setUnitPos=function(){this._pendantWidth=this._conData.conWidth?this._conData.conWidth:100,this._pendantHeight=this._conData.conHeight?this._conData.conHeight:100,this.width=this._pendantWidth,this.height=this._pendantHeight+this.lineLength,this._parentCon.addChildAt(this,this._parentCon.numChildren),this._lineImg=new Laya.Image(this.lineUrl),this.addChildAt(this._lineImg,0),this._lineImg.size(this.lineWidth,this.lineLength+30),this._lineImg.centerX=0,this._lineImg.y=0,this.pivot(.5*this.width,0),this.x=this._conData.conX,this.y=this._conData.conY,this.left=this._conData.conLeft,this.right=this._conData.conRight,this.top=this._conData.conTop,this.bottom=this._conData.conBottom,this.centerX=this._conData.conCenterX,this.centerY=this._conData.conCenterY,null==this.x&&null==this.y&&(this.top=10,this.x=Laya.stage.width/(AdPendant.PendantNum+1)*(AdPendant.PendantCount+1)),AdPendant.PendantCount++},Object.defineProperty(AdPendant.prototype,"lineUrl",{get:function(){return AdPendant.CustomData.lineUrl?AdPendant.CustomData.lineUrl:CustomAdConfig.HOST+"imgPendantLine.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdPendant.prototype,"lineWidth",{get:function(){return AdPendant.CustomData.lineWidth?AdPendant.CustomData.lineWidth:7},enumerable:!0,configurable:!0}),Object.defineProperty(AdPendant.prototype,"lineLength",{get:function(){return AdPendant.CustomData.lineLength?AdPendant.CustomData.lineLength:110},enumerable:!0,configurable:!0}),Object.defineProperty(AdPendant.prototype,"swingRange",{get:function(){return AdPendant.CustomData.swingRange?AdPendant.CustomData.swingRange:CustomAdConfig.PendantShakeAngleLimit},enumerable:!0,configurable:!0}),Object.defineProperty(AdPendant.prototype,"swingAnglePerMs",{get:function(){return AdPendant.CustomData.swingAnglePerMs?AdPendant.CustomData.swingAnglePerMs:CustomAdConfig.PendantShakeAnglePerMs},enumerable:!0,configurable:!0}),AdPendant.prototype.loadAndShow=function(){this.loadLine()},AdPendant.prototype.loadLine=function(){AdLoader.load([{url:this.lineUrl,type:Laya.Loader.IMAGE}],laya.utils.Handler.create(this,this.onLoadLineRes))},AdPendant.prototype.onLoadLineRes=function(){null!=this._parentCon&&null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.loadAdIcons())},AdPendant.prototype.loadAdIcons=function(){this._curContentData=this._contents[0],AdLoader.load(this._curContentData.resUrls,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdPendant.prototype.onLoadAdIcons=function(){this._pageId==CustomAdMgr.curPageId&&null!=this._parentCon&&null!=this._conData&&(this._adElement||(this._adElement=AdElement.creatAdElement()),this._adElement.setData(this._curContentData,this._pendantWidth,this._pendantHeight,this._pageId,this._conData.containerId,!0),this.addChild(this._adElement.icon),this._adElement.icon.pos(0,this.lineLength),this._adElement.play(),this.shake(),zm.AdShowTime.instance.adShow(this._pageId,this._conData.containerId,this._curContentData.adId,this._curContentData.order,this._curContentData.effectType))},AdPendant.prototype.stopAnimation=function(){this.stopShake()},AdPendant.prototype.shake=function(){this.stopShake(),this.direction=1,Laya.timer.frameLoop(1,this,this.onShakeFrame)},AdPendant.prototype.stopShake=function(){Laya.timer.clear(this,this.shake),Laya.timer.clear(this,this.onShakeFrame),this.rotation=0},AdPendant.prototype.onShakeFrame=function(t){var e=this.direction*Math.min(1,this.swingAnglePerMs*Laya.timer.delta),n=this.rotation+e;this.rotation=n,Math.abs(this.rotation)>this.swingRange&&(this.direction=this.rotation-this.swingRange>0?-1:1)},AdPendant.CustomData={},AdPendant.PendantNum=0,AdPendant.PendantCount=0,AdPendant}(Laya.View),CustomAdData=function(){function CustomAdData(){this._adLanternPool=[],this._curLanterns=[],this._adMenuPool=[],this._curMenus=[],this._adMenuNewPool=[],this._curMenuNews=[],this._adGuessPool=[],this._curGuesss=[],this._adPendantPool=[],this._curPendants=[],this._pageData=[]}return CustomAdData.prototype.getPageConfig=function(t){return this._pageData[t]},CustomAdData.prototype.parseServerData=function(t,e){this._pageData[t]=e?AdContainer.parseData(e.list):[]},CustomAdData.prototype.creatAdLantern=function(){0==this._adLanternPool.length&&(this._adLanternPool[0]=new AdLantern);var t=this._adLanternPool.pop();return this._curLanterns.push(t),t},CustomAdData.prototype.removeAllAdLanternByPage=function(t){for(var e,n=this._curLanterns.length;n>=0;n--)(e=this._curLanterns[n])&&e.pageId==t&&(e.clear(),this._curLanterns.splice(n,1),this._adLanternPool.push(e))},CustomAdData.prototype.creatAdMenu=function(){0==this._adMenuPool.length&&(this._adMenuPool[0]=new AdMenu);var t=this._adMenuPool.pop();return this._curMenus.push(t),t},CustomAdData.prototype.removeAllAdMenuByPage=function(t){for(var e,n=this._curMenus.length;n>=0;n--)(e=this._curMenus[n])&&e.pageId==t&&(e.clear(),this._curMenus.splice(n,1),this._adMenuPool.push(e))},CustomAdData.prototype.creatAdMenuNew=function(){0==this._adMenuNewPool.length&&(this._adMenuNewPool[0]=new AdMenuNew);var t=this._adMenuNewPool.pop();return this._curMenuNews.push(t),t},CustomAdData.prototype.removeAllAdMenuNewByPage=function(t){for(var e,n=this._curMenuNews.length;n>=0;n--)(e=this._curMenuNews[n])&&e.pageId==t&&(e.clear(),this._curMenuNews.splice(n,1),this._adMenuNewPool.push(e))},CustomAdData.prototype.creatAdGuess=function(t){for(var e,n=this._adGuessPool.length-1;n>=0;n--)if(this._adGuessPool[n].guessType==t){e=this._adGuessPool[n],this._adGuessPool.splice(n,1);break}return e||(e=AdFactory.getAdGuess(t)),this._curGuesss.push(e),e},CustomAdData.prototype.removeAllAdGuessByPage=function(t){for(var e,n=this._curGuesss.length;n>=0;n--)(e=this._curGuesss[n])&&e.pageId==t&&(e.clear(),this._curGuesss.splice(n,1),this._adGuessPool.push(e))},CustomAdData.prototype.creatAdPendant=function(){0==this._adPendantPool.length&&(this._adPendantPool[0]=new AdPendant);var t=this._adPendantPool.pop();return this._curPendants.push(t),t},CustomAdData.prototype.removeAdPendantByPage=function(t){for(var e,n=this._curPendants.length;n>=0;n--)(e=this._curPendants[n])&&e.pageId==t&&(e.clear(),this._curPendants.splice(n,1),this._adPendantPool.push(e))},CustomAdData.prototype.getCurPageAdContainerByType=function(t,e){var n=this.getPageConfig(t),i=[];if(n)for(var o=0;o<n.length;o++)n[o]&&n[o].containerType==e&&i.push(n[o]);return i},CustomAdData.GuessCustomeData={},CustomAdData}();!function(t){!function(e){var n=function(e){function AdTaskItemUIUI(){return e.call(this)||this}return __extends(AdTaskItemUIUI,e),AdTaskItemUIUI.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.customad.AdTaskItemUIUI.uiView)},AdTaskItemUIUI.uiView={type:"View",props:{width:595,height:120},child:[{type:"Image",props:{var:"bg",top:0,right:0,left:0,bottom:0}},{type:"Label",props:{y:35,x:130,width:200,var:"txtName",valign:"middle",text:"游戏名称",height:50,fontSize:38,font:"SimHei",color:"#ffffe3",centerY:0,align:"left"}},{type:"Button",props:{var:"btnAd",stateNum:1,right:20,centerY:0}},{type:"Box",props:{width:80,var:"iconBox",left:20,height:80,centerY:0}}]},AdTaskItemUIUI}(Laya.View);e.AdTaskItemUIUI=n}(t.customad||(t.customad={}))}(ui||(ui={}));var AdTask=function(t){function AdTask(){return t.call(this)||this}return __extends(AdTask,t),Object.defineProperty(AdTask,"instance",{get:function(){return this._instance||(this._instance=new AdTask),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),AdTask.prototype.setUnit=function(t,e,n){n&&e&&(this.clear(),this._pageId=t,this.visible=!1,this.mouseThrough=!0,this._parentCon=n,this._conData=e,this._contents=this._conData.contents,zm.eventCenter.on(zm.events.EventAppShow,this,this.onGameShow),this.getTaskData(),this.loadAndShow())},AdTask.prototype.clear=function(){this._iconPanel&&(this._iconPanel.removeChildren(),this._iconPanel.removeSelf(),this._iconPanel=null),this.clearElements(),zm.eventCenter.off(zm.events.EventAppShow,this,this.onGameShow),this.off(Laya.Event.CLICK,this,this.onClick),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._conData=null,this._contents=[],this._filterContents=[],this._itemList={},this._startTaskAppId=""},AdTask.prototype.onGameShow=function(t){if(this._startTaskAppId&&0!=this._startTaskAppId.length){var e=!0;0!=AdTask.TaskCheckLevel?(e=Date.now()-this._startTaskTimeMark>=1e4,1!=AdTask.TaskCheckLevel?(e=e&&1038==t.scene,2!=AdTask.TaskCheckLevel?(e=e&&t.appID==this._startTaskAppId,this.doCallback(e)):this.doCallback(e)):this.doCallback(e)):this.doCallback(e)}},AdTask.prototype.doCallback=function(t){if(t){var e=this.getTaskInfoByAppId(this._startTaskAppId);e&&e.canGain&&(e.gainReward(),this.saveTaskData(),this.refreshItem(e))}else wx.showToast({title:"请认真试玩游戏才可获得奖励哦！",icon:"none",duration:2e3});this._startTaskAppId="",this._startTaskTimeMark=0,AdTask.CustomData.callback&&AdTask.CustomData.callback({result:t})},AdTask.prototype.getTaskData=function(){this._taskData=[];var t=Laya.LocalStorage.getItem(AdTask.AdTaskey);if(t&&t.length>0)for(var e=t.split(","),n=0;n<e.length;n++)e[n]&&e[n].length>10&&this._taskData.push(AdTaskInfo.parseInfo(e[n]))},AdTask.prototype.getTaskInfoByAppId=function(t){for(var e=0;e<this._taskData.length;e++)if(this._taskData[e].appId==t)return this._taskData[e];var n=AdTaskInfo.creatInfo(t);return this._taskData.push(n),n},AdTask.prototype.saveTaskData=function(){for(var t="",e=0;e<this._taskData.length;e++)t=t+","+this._taskData[e].valueStr;t=t.substring(1,t.length),Laya.LocalStorage.setItem(AdTask.AdTaskey,t)},AdTask.prototype.setMenuLayout=function(){this.size(this.containerWidth,this.containerHeight),AdTask.AdItemWidth=this.width-2*AdTask.AdItemSpaceW,AdTask.AdItemHeight=(this.height-this.iconNum*AdTask.AdItemSpaceH)/this.iconNum,AdTask.AdIconHeight=AdTask.AdItemHeight-2*AdTask.AdIconSpaceH,AdTask.AdIconWidth=AdTask.AdIconHeight},AdTask.prototype.setUnitPos=function(){this.setMenuLayout(),this._parentCon.addChildAt(this,this._parentCon.numChildren),this.centerX=void 0,this.centerY=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,AdTask.CustomData.pos?(this.x=AdTask.CustomData.pos.x,this.y=AdTask.CustomData.pos.y,this.left=AdTask.CustomData.pos.left,this.right=AdTask.CustomData.pos.right,this.top=AdTask.CustomData.pos.top,this.bottom=AdTask.CustomData.pos.bottom,this.centerX=AdTask.CustomData.pos.centerX,this.centerY=AdTask.CustomData.pos.centerY):(this.centerX=0,this.y=100),this.on(Laya.Event.CLICK,this,this.onClick)},AdTask.prototype.onClick=function(t){var e=t.target.name;if(this._conData&&-1!=e.indexOf("btnAd_")){var n=parseInt(e.split("_")[1]);this.clickIcon(n)}},AdTask.prototype.clickIcon=function(t){var e=this._filterContents[t],n=this.getTaskInfoByAppId(e.linkValue);AdClickHandler.openAd(e,this._pageId,this._conData.containerId,laya.utils.Handler.create(this,this.jumpSuccess,[n]))},AdTask.prototype.jumpSuccess=function(t){t.canGain&&(this._startTaskTimeMark=Date.now(),this._startTaskAppId=t.appId)},AdTask.prototype.loadAndShow=function(){this.loadBg()},AdTask.prototype.loadBg=function(){var t=[{url:this.itemBgUrl,type:Laya.Loader.IMAGE},{url:this.btnGainUrl,type:Laya.Loader.IMAGE},{url:this.btnGoUrl,type:Laya.Loader.IMAGE}];AdLoader.load(t,laya.utils.Handler.create(this,this.onLoadBgRes))},AdTask.prototype.onLoadBgRes=function(){null!=this._parentCon&&null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.loadAdIcons())},AdTask.prototype.loadAdIcons=function(){AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdTask.prototype.onLoadAdIcons=function(){if(null!=this._parentCon&&null!=this._conData){this._iconPanel||(this._iconPanel=new Laya.Panel,this._iconPanel.pos(0,0),this._iconPanel.size(this.width,this.height),this.addChild(this._iconPanel),AdTask.NeedSlide&&(this._iconPanel.vScrollBarSkin="",this._iconPanel.vScrollBar.elasticBackTime=150,this._iconPanel.vScrollBar.elasticDistance=100,this._iconPanel.vScrollBar.scrollSize=AdTask.AdItemHeight+AdTask.AdIconSpaceH)),this._iconPanel.removeChildren(),this.clearElements(),this._itemList={},this._filterContents=this.filterContents(this._contents);for(var t=0;t<this._filterContents.length;t++){var e=this._filterContents[t];if(e&&e.resUrl){var n=new ui.customad.AdTaskItemUIUI;n.mouseEnabled=!0,n.size(AdTask.AdItemWidth,AdTask.AdItemHeight),n.bg.skin=this.itemBgUrl,n.bg.sizeGrid=this.itemBgSizeGrid;var i=AdElement.creatAdElement();this._curElements.push(i),i.setData(e,AdTask.AdIconWidth,AdTask.AdIconHeight,this._pageId,this._conData.containerId,!1),i.icon.pos(0,0),n.iconBox.addChild(i.icon),i.play(),n.iconBox.size(AdTask.AdIconWidth,AdTask.AdIconHeight);var o=this.getTaskInfoByAppId(e.linkValue);n.btnAd.stateNum=o.canGain?this.btnStateNum:1,n.btnAd.skin=o.canGain?this.btnGainUrl:this.btnGoUrl,n.btnAd.label="",n.btnAd.scale(.8,.8),n.btnAd.name="btnAd_"+t,n.txtName.color=this.fontColor,n.txtName.fontSize=this.itemNameFontSize,n.txtName.font=this.font,n.txtName.text=e.adName,n.txtName.left=n.iconBox.left+n.iconBox.width+10,n.x=AdTask.AdItemSpaceW,n.y=t*(AdTask.AdItemSpaceH+n.height),this._iconPanel.addChild(n),this._itemList[""+o.appId]=n,zm.AdShowTime.instance.adShow(this._pageId,this._conData.containerId,e.adId,e.order,e.effectType)}}this.visible=!0,this.saveTaskData()}},AdTask.prototype.filterContents=function(t){for(var e=[],n=[],i=0;i<t.length;i++){var o=t[i];if(o&&o.resUrl)this.getTaskInfoByAppId(o.linkValue).canGain?e.push(o):n.push(o)}return e.concat(n)},AdTask.prototype.refreshItem=function(t){var e=this._itemList[t.appId];e&&(e.btnAd.skin=t.canGain?this.btnGainUrl:this.btnGoUrl)},AdTask.prototype.clearElements=function(){if(this._curElements&&this._curElements.length>0)for(var t=this._curElements.length-1;t>=0;t--){var e=this._curElements[t];zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,e.adId,e.order,e.effectType),AdElement.recoverAdElement(e),this._curElements.splice(t,1)}this._curElements=[]},Object.defineProperty(AdTask.prototype,"itemBgUrl",{get:function(){return AdTask.CustomData.bgSkin?AdTask.CustomData.bgSkin:CustomAdConfig.HOST+"itemBg.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"btnGoUrl",{get:function(){return AdTask.CustomData.btnGoSkin?AdTask.CustomData.btnGoSkin:CustomAdConfig.HOST+"btnGO.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"btnGainUrl",{get:function(){return AdTask.CustomData.btnGainSkin?AdTask.CustomData.btnGainSkin:CustomAdConfig.HOST+"btnGain.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"itemBgSizeGrid",{get:function(){return AdTask.CustomData.bgSizeGrid&&AdTask.CustomData.bgSkin?AdTask.CustomData.bgSizeGrid:"20,20,20,20,0"},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"itemNameFontSize",{get:function(){return AdTask.CustomData.fontSize?AdTask.CustomData.fontSize:28},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"iconNum",{get:function(){return AdTask.CustomData.iconNum?AdTask.CustomData.iconNum:5},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"containerWidth",{get:function(){return AdTask.CustomData.containerWidth?AdTask.CustomData.containerWidth:595},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"containerHeight",{get:function(){return AdTask.CustomData.containerHeight?AdTask.CustomData.containerHeight:605},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"fontColor",{get:function(){return AdTask.CustomData.fontColor?AdTask.CustomData.fontColor:"#FFFFE3"},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"font",{get:function(){return AdTask.CustomData.font?AdTask.CustomData.font:"SimHei"},enumerable:!0,configurable:!0}),Object.defineProperty(AdTask.prototype,"btnStateNum",{get:function(){return AdTask.CustomData.btnStateNum?AdTask.CustomData.btnStateNum:1},enumerable:!0,configurable:!0}),AdTask.CustomData={},AdTask.AdTaskey="Custom_AdTask_Key",AdTask.NeedSlide=!0,AdTask.AdItemSpaceW=5,AdTask.AdItemSpaceH=5,AdTask.AdIconWidth=80,AdTask.AdIconHeight=80,AdTask.AdIconSpaceH=10,AdTask.TaskCheckLevel=1,AdTask}(Laya.View),AdTaskInfo=function(){function AdTaskInfo(t){var e=t.split("*");this._appId=e[0],this._taskState=parseInt(e[1]),this._timeMark=parseInt(e[2]);var n=new Date(this._timeMark),i=new Date;AdTaskInfo.everyday()&&n.getDay()!=i.getDay()&&(this.taskState=0)}return AdTaskInfo.creatInfo=function(t){return new AdTaskInfo(t+"*0*0")},AdTaskInfo.parseInfo=function(t){return new AdTaskInfo(t)},AdTaskInfo.everyday=function(){return null!=AdTask.CustomData.everyday&&AdTask.CustomData.everyday},Object.defineProperty(AdTaskInfo.prototype,"appId",{get:function(){return this._appId},enumerable:!0,configurable:!0}),Object.defineProperty(AdTaskInfo.prototype,"canGain",{get:function(){return 0==this._taskState},enumerable:!0,configurable:!0}),AdTaskInfo.prototype.finishTask=function(){0==this._taskState&&(this.taskState=1)},AdTaskInfo.prototype.gainReward=function(){this.taskState=2},Object.defineProperty(AdTaskInfo.prototype,"taskState",{set:function(t){this._taskState=t,this._timeMark=Date.now()},enumerable:!0,configurable:!0}),Object.defineProperty(AdTaskInfo.prototype,"valueStr",{get:function(){return this._appId+"*"+this._taskState+"*"+this._timeMark},enumerable:!0,configurable:!0}),AdTaskInfo}(),AdBox=function(t){function AdBox(){return t.call(this)||this}return __extends(AdBox,t),Object.defineProperty(AdBox,"instance",{get:function(){return this._instance||(this._instance=new AdBox),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),AdBox.prototype.setUnit=function(t,e,n){e?(this.clear(),this._pageId=t,this.mouseThrough=!0,this._conData=e,this._contents=this._conData.contents,this.loadAndShow()):this.doCallback()},AdBox.prototype.doCallback=function(){AdBox.CustomData.callback&&AdBox.CustomData.callback()},AdBox.prototype.clear=function(){this._isShow&&this._contents&&this._contents.length>0&&this.adTimeHide(),this._conData=null,this._contents=[],this._iconPanel&&(this._iconPanel.removeChildren(),this._iconPanel.removeSelf(),this._iconPanel=null),this.clearElements(),this.off(Laya.Event.CLICK,this,this.onClick),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._isShow=!1},AdBox.prototype.setMenuLayout=function(){this.size(Laya.stage.width+10,Laya.stage.height+10),this.pos(-5,-5),this._mask=new Laya.Sprite,this._mask.size(this.width,this.height),this._mask.pos(0,0),this._mask.visible=!0,this._mask.graphics.drawRect(0,0,this._mask.width,this._mask.height,"#000000"),this._mask.alpha=.5,this._mask.name=AdBox.MaskName,this._mask.mouseEnabled=!0,this._mask.mouseThrough=!1,this.addChildAt(this._mask,0),this._panel=new Laya.Box,this._panel.name="containerBox",this._panel.mouseThrough=!0,this.addChildAt(this._panel,1),this._bg=new Laya.Image,this._bg.name="menubg",this._bg.skin=this.bgUrl,this._bg.sizeGrid=this.bgSizeGrid,this._bg.size(this.containerWidth,this.containerHeight),this._bg.pos(0,0),this._panel.addChild(this._bg),this._title=new Laya.Image,this._title.mouseEnabled=!1,this._title.skin=this.titleUrl,this._title.centerX=0,this._title.y=this.titleDiff,this._panel.addChild(this._title),this._closeImg=new Laya.Image,this._closeImg.name=AdBox.CloseBtnName,this._closeImg.skin=this.closeUrl,this._closeImg.mouseEnabled=!0,this._closeImg.mouseThrough=!1,this._closeImg.centerX=0,this._closeImg.y=this._bg.height+this.closeBtnDiff,this._panel.addChild(this._closeImg);var t=this.layoutStyle;AdBox.AdIconWidth=(this._bg.width-2*AdBox.BorderDiff-(t.x+1)*AdBox.AdIconSpaceW)/t.x,AdBox.AdIconHeight=(this._bg.height-2*AdBox.BorderDiff-(t.y+1)*AdBox.AdIconSpaceH-t.y*AdBox.AdIconTxtHeight-this.offSetTop)/t.y;var e=Math.min(AdBox.AdIconWidth,AdBox.AdIconHeight),n=AdBox.AdIconWidth-e;AdBox.AdIconWidth=AdBox.AdIconHeight=e,n>0?AdBox.AdIconSpaceW=(this._bg.width-2*AdBox.BorderDiff-AdBox.AdIconWidth*t.x)/(t.x+1):AdBox.AdIconSpaceH=(this._bg.height-2*AdBox.BorderDiff-AdBox.AdIconHeight*t.y-t.y*AdBox.AdIconTxtHeight-this.offSetTop)/(t.y+1)},AdBox.prototype.setUnitPos=function(){this.setMenuLayout(),this._panel.anchorX=0,this._panel.anchorY=0,this._panel.scale(1,1),this._panel.centerX=void 0,this._panel.centerY=void 0,this._panel.left=void 0,this._panel.right=void 0,this._panel.top=void 0,this._panel.bottom=void 0,AdBox.CustomData.pos?(this._panel.x=AdBox.CustomData.pos.x,this._panel.y=AdBox.CustomData.pos.y,this._panel.left=AdBox.CustomData.pos.left,this._panel.right=AdBox.CustomData.pos.right,this._panel.top=AdBox.CustomData.pos.top,this._panel.bottom=AdBox.CustomData.pos.bottom,this._panel.centerX=AdBox.CustomData.pos.centerX,this._panel.centerY=AdBox.CustomData.pos.centerY):(this._panel.centerX=0,this._panel.centerY=0)},AdBox.prototype.onClick=function(t){var e=t.target.name;this._conData&&(e!=AdBox.CloseBtnName&&e!=AdBox.MaskName||this.closeAdBox())},AdBox.prototype.showAdBox=function(){this._isShow||(Laya.stage.addChild(this),this.zOrder=50,this._isShow=!0,this._panel.scaleX=.5,this._panel.scaleY=.5,this._panel.anchorX=.5,this._panel.anchorY=.5,Laya.Tween.to(this._panel,{scaleX:1,scaleY:1},300,Laya.Ease.backOut,laya.utils.Handler.create(this,this.onShow)))},AdBox.prototype.onShow=function(){this.adTimeShow(),this.on(Laya.Event.CLICK,this,this.onClick)},AdBox.prototype.adTimeShow=function(){var t=this,e=zm.AdShowTime.instance,n=this._conData.containerId;this._contents.forEach(function(i){e.adShow(t._pageId,n,i.adId,i.order,i.effectType)})},AdBox.prototype.adTimeHide=function(){var t=this,e=zm.AdShowTime.instance,n=this._conData.containerId;this._contents.forEach(function(i){e.adHide(t._pageId,n,i.adId,i.order,i.effectType)})},AdBox.prototype.closeAdBox=function(){this._isShow&&Laya.Tween.to(this._panel,{scaleX:.1,scaleY:.1},300,Laya.Ease.backIn,laya.utils.Handler.create(this,this.onClose))},AdBox.prototype.onClose=function(){this.clear(),this.doCallback()},AdBox.prototype.loadAndShow=function(){AdLoader.load(this.bgRes(),laya.utils.Handler.create(this,this.onLoadBgRes))},AdBox.prototype.onLoadBgRes=function(){null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.loadAdIcons())},AdBox.prototype.loadAdIcons=function(){AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdBox.prototype.onLoadAdIcons=function(){this.setAdIcons(),this.showAdBox()},AdBox.prototype.setAdIcons=function(){if(null!=this._conData){this._iconPanel=new Laya.Panel,this._iconPanel.pos(this._bg.x+AdBox.BorderDiff,this._bg.y+AdBox.BorderDiff),this._iconPanel.size(this._bg.width-2*AdBox.BorderDiff,this._bg.height-2*AdBox.BorderDiff),this._panel.addChild(this._iconPanel),this._iconPanel.removeChildren(),this.clearElements();for(var t=0,e=this.layoutStyle,n=Math.min(e.x*e.y,this._contents.length),i=0;i<n;i++){var o=this._contents[i];if(o&&o.resUrl){var s=new Laya.Sprite;s.mouseEnabled=!0;var a=AdElement.creatAdElement();this._curElements.push(a),a.setData(o,AdBox.AdIconWidth,AdBox.AdIconHeight,this._pageId,this._conData.containerId),a.icon.pos(0,0),s.addChild(a.icon),a.play();var r=new Laya.Label;r.font=this.font,r.color=this.fontColor,r.fontSize=this.itemNameFontSize,r.align="center",r.valign="bottom",r.size(AdBox.AdIconWidth+20,AdBox.AdIconTxtHeight),r.pos(-10,AdBox.AdIconHeight),r.text=o.adName,s.addChild(r),s.size(AdBox.AdIconWidth,AdBox.AdIconHeight+AdBox.AdIconTxtHeight);var h=t%e.x,d=Math.floor(t/e.x);s.x=AdBox.AdIconSpaceW+h*(AdBox.AdIconSpaceW+s.width),s.y=AdBox.AdIconSpaceH+d*(AdBox.AdIconSpaceH+s.height)+this.offSetTop,this._iconPanel.addChild(s),t++}}}},AdBox.prototype.clearElements=function(){if(this._curElements&&this._curElements.length>0)for(var t=this._curElements.length-1;t>=0;t--){var e=this._curElements[t];AdElement.recoverAdElement(e),this._curElements.splice(t,1)}this._curElements=[]},Object.defineProperty(AdBox.prototype,"containerWidth",{get:function(){return AdBox.CustomData.containerWidth?AdBox.CustomData.containerWidth:644},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"containerHeight",{get:function(){return AdBox.CustomData.containerHeight?AdBox.CustomData.containerHeight:644},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"titleUrl",{get:function(){return AdBox.CustomData.titleSkin?AdBox.CustomData.titleSkin:CustomAdConfig.HOST+"boxtitle.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"closeUrl",{get:function(){return AdBox.CustomData.closeBtnSkin?AdBox.CustomData.closeBtnSkin:CustomAdConfig.HOST+"boxclose.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"bgUrl",{get:function(){return AdBox.CustomData.bgSkin?AdBox.CustomData.bgSkin:CustomAdConfig.HOST+"boxbackground.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"bgSizeGrid",{get:function(){return AdBox.CustomData.bgSizeGrid?AdBox.CustomData.bgSizeGrid:"20,20,20,20,0"},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"layoutStyle",{get:function(){return AdBox.CustomData.layoutStyle?AdBox.CustomData.layoutStyle:new Laya.Point(4,2)},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"itemNameFontSize",{get:function(){return AdBox.CustomData.fontSize?AdBox.CustomData.fontSize:24},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"fontColor",{get:function(){return AdBox.CustomData.fontColor?AdBox.CustomData.fontColor:"#795844"},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"font",{get:function(){return AdBox.CustomData.font?AdBox.CustomData.font:"SimHei"},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"titleDiff",{get:function(){return AdBox.CustomData.titleDiff?AdBox.CustomData.titleDiff:-133},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"closeBtnDiff",{get:function(){return AdBox.CustomData.closeBtnDiff?AdBox.CustomData.closeBtnDiff:60},enumerable:!0,configurable:!0}),Object.defineProperty(AdBox.prototype,"offSetTop",{get:function(){return AdBox.CustomData.offSetTop?AdBox.CustomData.offSetTop:110},enumerable:!0,configurable:!0}),AdBox.prototype.bgRes=function(){return[{url:this.bgUrl,type:Laya.Loader.IMAGE},{url:this.closeUrl,type:Laya.Loader.IMAGE},{url:this.titleUrl,type:Laya.Loader.IMAGE}]},AdBox.prototype.preload=function(t){AdLoader.load(t.allAdIconRes.concat(this.bgRes()),laya.utils.Handler.create(this,this.preloadSuc))},AdBox.prototype.preloadSuc=function(){console.log("adbox preload suc",this._pageId)},AdBox.CustomData={},AdBox.AdIconWidth=80,AdBox.AdIconHeight=80,AdBox.AdIconTxtHeight=40,AdBox.AdIconSpaceW=30,AdBox.AdIconSpaceH=30,AdBox.BorderDiff=5,AdBox.MaskName="MaskBg",AdBox.CloseBtnName="CloseBtn",AdBox}(Laya.View),AdFullScreen=function(t){function AdFullScreen(){return t.call(this)||this}return __extends(AdFullScreen,t),Object.defineProperty(AdFullScreen,"instance",{get:function(){return this._instance||(this._instance=new AdFullScreen),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"hasAdGuess",{get:function(){return null!=this._adFriend&&null!=this._adFriend},enumerable:!0,configurable:!0}),AdFullScreen.prototype.setUnit=function(t,e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),e&&n?(this.clear(),this._pageId=t,this._hotData=e,this._friendData=n,i&&(this._adFriend=i),o&&(this._adHot=o),this.loadAndShow()):this.doCallback()},AdFullScreen.prototype.doCallback=function(){AdFullScreen.CustomData.callback&&AdFullScreen.CustomData.callback()},AdFullScreen.prototype.clear=function(){this._hotData=null,this._friendData=null,this._adFriend&&this._adFriend.clear(),this._adHot&&this._adHot.clear(),this._boxFriend&&(this._boxFriend.removeChildren(),this._boxFriend.removeSelf(),this._boxFriend=null),this._boxHot&&(this._boxHot.removeChildren(),this._boxHot.removeSelf(),this._boxHot=null),this.off(Laya.Event.CLICK,this,this.onClick),this._closeImg&&(this._closeImg.off(Laya.Event.MOUSE_OVER,this,this.onMouseOver),this._closeImg.off(Laya.Event.MOUSE_OUT,this,this.onMouseOut)),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._isShow=!1},AdFullScreen.prototype.getMinScale=function(){var t=Laya.stage.width/720,e=Laya.stage.height/1280;return Math.min(t,e)},AdFullScreen.prototype.setMenuLayout=function(){this.size(Laya.stage.width+10,Laya.stage.height+10),this.pos(-5,-5),this._bgScreen=new Laya.Image,this._bgScreen.size(this.width,this.height),this._bgScreen.pos(0,0),this._bgScreen.skin=this.skinBgScreen,this._bgScreen.sizeGrid="10,10,10,10,0",this._bgScreen.visible=!0,this._bgScreen.mouseEnabled=!0,this._bgScreen.mouseThrough=!1,this.addChildAt(this._bgScreen,0),this._panel=new Laya.Box,this._panel.size(720,1280),this._panel.scale(this.getMinScale(),this.getMinScale()),this._panel.visible=!0,this._panel.mouseThrough=!0,this.addChildAt(this._panel,1);var t=(this._panel.width-660)/2;this._closeImg=new Laya.Image,this._panel.addChild(this._closeImg),this._closeImg.name=AdFullScreen.CloseBtnName,this._closeImg.skin=this.skinBtnCloseUp,this._closeImg.mouseEnabled=!0,this._closeImg.mouseThrough=!1,this._closeImg.pos(t,70),this._titleFriend=new Laya.Image,this._panel.addChild(this._titleFriend),this._titleFriend.mouseEnabled=!1,this._titleFriend.skin=this.skinTitleFriend,this._titleFriend.pos(t,this._closeImg.y+this._closeImg.height+25),this._boxFriend=new Laya.Box,this._panel.addChild(this._boxFriend),this._boxFriend.size(660,140),this._boxFriend.name="boxFriend",this._boxFriend.mouseThrough=!0,this._boxFriend.pos(t,this._titleFriend.y+this._titleFriend.height),this._titleHot=new Laya.Image,this._panel.addChild(this._titleHot),this._titleHot.mouseEnabled=!1,this._titleHot.skin=this.skinTitleHot,this._titleHot.pos(t,this._boxFriend.y+this._boxFriend.height+10),this._boxHot=new Laya.Box,this._panel.addChild(this._boxHot),this._boxHot.name="boxHot",this._boxHot.mouseThrough=!0,this._boxHot.pos(t,this._titleHot.y+this._titleHot.height),this._boxHot.size(660,Laya.stage.height/this.getMinScale()-this._boxHot.y-80),this._maskScrll=new Laya.Image,this._panel.addChild(this._maskScrll),this._maskScrll.mouseEnabled=!1,this._maskScrll.skin=this.skinScrollMask,this._maskScrll.sizeGrid="30,10,10,10,0",this._maskScrll.size(660,20),this._maskScrll.pos(t,Laya.stage.height/this.getMinScale()-80-20)},AdFullScreen.prototype.setUnitBox=function(){var t={pos:{x:0,y:0},guessType:GuessType.Horizontal,containerWidth:this._boxFriend.width,containerHeight:this._boxFriend.height,borderDiffWidth:20,borderDiffHeight:10,bgSkin:this.skinBgFriend,bgSizeGrid:"40,40,40,40,0",needName:!1};this._adFriend.setUnit(this._pageId,this._friendData,this._boxFriend,t);var e={pos:{x:0,y:0},verticalCon:this._boxHot,guessType:GuessType.Vertical,containerWidth:this._boxHot.width,containerHeight:this._boxHot.height,itemWidth:218,itemHeight:247,skinBgItem:this.skinBgHotItem,itemBgSizeGrid:"20,25,30,25,0",itemBgContentWidthOffset:23,itemBgContentHeightOffset:25,spaceY:1,scrollType:0,autoScroll:!0,needBorder:!1,needName:!1};this._adHot.setUnit(this._pageId,this._hotData,this._boxHot,e)},AdFullScreen.prototype.onClick=function(t){var e=t.target.name;this._hotData&&this._friendData&&e==AdFullScreen.CloseBtnName&&this.closeAdFullScreen()},AdFullScreen.prototype.showAdFullScreen=function(){if(!this._isShow){this._isShow=!0,this.zOrder=50;var t=this._panel.scaleX;this._panel.anchorX=.5,this._panel.anchorY=.5,Laya.stage.addChild(this),this._panel.centerX=0,this._panel.top=0,Laya.timer.callLater(this,function(){this._panel.scaleX=.5,this._panel.scaleY=.5,Laya.Tween.to(this._panel,{scaleX:t,scaleY:t},300,Laya.Ease.backOut,laya.utils.Handler.create(this,this.onShow))}.bind(this))}},AdFullScreen.prototype.onShow=function(){this.on(Laya.Event.CLICK,this,this.onClick),this._closeImg&&(this._closeImg.on(Laya.Event.MOUSE_OVER,this,this.onMouseOver),this._closeImg.on(Laya.Event.MOUSE_OUT,this,this.onMouseOut))},AdFullScreen.prototype.onMouseOver=function(){this._closeImg.skin=this.skinBtnCloseDown},AdFullScreen.prototype.onMouseOut=function(){this._closeImg.skin=this.skinBtnCloseUp},AdFullScreen.prototype.closeAdFullScreen=function(){this._isShow&&Laya.Tween.to(this._panel,{scaleX:.1,scaleY:.1},300,Laya.Ease.backIn,laya.utils.Handler.create(this,this.onClose))},AdFullScreen.prototype.onClose=function(){this.clear(),this.doCallback()},AdFullScreen.prototype.loadAndShow=function(){AdLoader.load(this.bgRes(),laya.utils.Handler.create(this,this.onLoadBgRes))},AdFullScreen.prototype.onLoadBgRes=function(){this._hotData&&this._friendData&&(this.removeChildren(),this.setMenuLayout(),this.loadAdIcons())},AdFullScreen.prototype.loadAdIcons=function(){AdLoader.load(this._hotData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},AdFullScreen.prototype.onLoadAdIcons=function(){this.setUnitBox(),this.showAdFullScreen()},Object.defineProperty(AdFullScreen.prototype,"skinBgScreen",{get:function(){return AdFullScreen.CustomData.skinBgScreen?AdFullScreen.CustomData.skinBgScreen:CustomAdConfig.HOST+"fullscreen/imgScreenBg.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinScrollMask",{get:function(){return AdFullScreen.CustomData.skinScrollMask?AdFullScreen.CustomData.skinScrollMask:CustomAdConfig.HOST+"fullscreen/imgScrollMask.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinTitleFriend",{get:function(){return AdFullScreen.CustomData.skinTitleFriend?AdFullScreen.CustomData.skinTitleFriend:CustomAdConfig.HOST+"fullscreen/imgTitleFriend.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinBgFriend",{get:function(){return AdFullScreen.CustomData.skinBgFriend?AdFullScreen.CustomData.skinBgFriend:CustomAdConfig.HOST+"fullscreen/imgFriendBg.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinTitleHot",{get:function(){return AdFullScreen.CustomData.skinTitleHot?AdFullScreen.CustomData.skinTitleHot:CustomAdConfig.HOST+"fullscreen/imgTitleHot.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinBtnCloseDown",{get:function(){return AdFullScreen.CustomData.skinBtnCloseDown?AdFullScreen.CustomData.skinBtnCloseDown:CustomAdConfig.HOST+"fullscreen/btnBack_down.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinBtnCloseUp",{get:function(){return AdFullScreen.CustomData.skinBtnCloseUp?AdFullScreen.CustomData.skinBtnCloseUp:CustomAdConfig.HOST+"fullscreen/btnBack_up.png"},enumerable:!0,configurable:!0}),Object.defineProperty(AdFullScreen.prototype,"skinBgHotItem",{get:function(){return AdFullScreen.CustomData.skinBgHotItem?AdFullScreen.CustomData.skinBgHotItem:CustomAdConfig.HOST+"fullscreen/imgHotItemBg.png"},enumerable:!0,configurable:!0}),AdFullScreen.prototype.bgRes=function(){return[{url:this.skinBtnCloseDown,type:Laya.Loader.IMAGE},{url:this.skinBtnCloseUp,type:Laya.Loader.IMAGE},{url:this.skinTitleHot,type:Laya.Loader.IMAGE},{url:this.skinTitleFriend,type:Laya.Loader.IMAGE},{url:this.skinBgFriend,type:Laya.Loader.IMAGE},{url:this.skinBgScreen,type:Laya.Loader.IMAGE},{url:this.skinScrollMask,type:Laya.Loader.IMAGE},{url:this.skinBgHotItem,type:Laya.Loader.IMAGE}]},AdFullScreen.prototype.preload=function(t){AdLoader.load(t.allAdIconRes.concat(this.bgRes()),laya.utils.Handler.create(this,this.preloadSuc))},AdFullScreen.prototype.preloadSuc=function(){console.log("AdFullScreen preload suc",this._pageId)},AdFullScreen.CustomData={},AdFullScreen.CloseBtnName="CloseBtn",AdFullScreen}(Laya.View),BannerGuess=function(t){function BannerGuess(){return t.call(this)||this}return __extends(BannerGuess,t),Object.defineProperty(BannerGuess.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),BannerGuess.prototype.show=function(){this._showGuess||(this._showGuess=!0,this.doShowGuess())},BannerGuess.prototype.hide=function(){this._showGuess=!1,this.doShowGuess()},BannerGuess.prototype.dispose=function(){this.clear(),this.removeSelf()},BannerGuess.prototype.doShowGuess=function(){var t=this;if(this.visible=this._showGuess&&this._loadGuess,this.visible){var e=zm.AdShowTime.instance;this._curContents.forEach(function(n){e.adShow(t._pageId,t._conData.containerId,n.adId,n.order,n.effectType)})}},BannerGuess.prototype.setUnit=function(t,e,n){e&&(this.clear(),this._pageId=t,this._showGuess=!1,this._loadGuess=!1,this.visible=!1,this.mouseThrough=!0,this._conData=e,this._contents=this._conData.contents,this._showCount=0,BannerGuess.AdIconTxtHeight=this.needName?BannerGuess.AdIconTxtHeight:0,this.loadAndShow())},BannerGuess.prototype.clear=function(){this._iconPanel&&(this._iconPanel.off(Laya.Event.MOUSE_DOWN,this,this.MouseDown),this._iconPanel.off(Laya.Event.MOUSE_UP,this,this.MouseUp),this._iconPanel.off(Laya.Event.MOUSE_OUT,this,this.MouseUp),this._iconPanel.removeChildren(),this._iconPanel.removeSelf(),this._iconPanel=null),this.clearElements(),this.stopRoll(),Laya.timer.clear(this,this.onAdSwitch),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._conData=null,this._contents=[],this._curContents=[]},BannerGuess.prototype.setMenuLayout=function(){this._bg=new Laya.Image,this._bg.name="menubg",this._bg.skin=this.bgUrl,this._bg.sizeGrid=this.bgSizeGrid,this._bg.pos(0,0),this.addChild(this._bg),this._bg.width=this.containerWidth,this._bg.height=this.containerHeight,this.size(this._bg.width,this._bg.height),BannerGuess.AdIconWidth=(this._bg.width-2*BannerGuess.BorderDiff-(this.iconNum+1)*BannerGuess.AdIconSpaceW-this.offSetLeft)/this.iconNum,BannerGuess.AdIconHeight=this._bg.height-2*BannerGuess.BorderDiff-2*BannerGuess.AdIconSpaceH-this.offSetTop-BannerGuess.AdIconTxtHeight;var t=Math.min(BannerGuess.AdIconWidth,BannerGuess.AdIconHeight),e=BannerGuess.AdIconWidth-t;BannerGuess.AdIconWidth=BannerGuess.AdIconHeight=t,e>0?BannerGuess.AdIconSpaceW=(this._bg.width-2*BannerGuess.BorderDiff-this.offSetLeft-this.iconNum*BannerGuess.AdIconWidth)/(this.iconNum+1):BannerGuess.AdIconSpaceH=(this._bg.height-2*BannerGuess.BorderDiff-BannerGuess.AdIconHeight-this.offSetTop-BannerGuess.AdIconTxtHeight)/2},BannerGuess.prototype.setUnitPos=function(){this.setMenuLayout(),Laya.stage.addChild(this),this.zOrder=1100,this.centerX=void 0,this.centerY=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,BannerGuess.CustomData.pos?(this.left=BannerGuess.CustomData.pos.left,this.top=BannerGuess.CustomData.pos.top,this.centerX=BannerGuess.CustomData.pos.centerX,this.bottom=BannerGuess.CustomData.pos.bottom):(this.centerX=0,this.bottom=0)},BannerGuess.prototype.loadAndShow=function(){this.loadBg()},BannerGuess.prototype.loadBg=function(){var t=[{url:this.bgUrl,type:Laya.Loader.IMAGE}];AdLoader.load(t,laya.utils.Handler.create(this,this.onLoadBgRes))},BannerGuess.prototype.onLoadBgRes=function(){null!=this._conData&&(this.removeChildren(),this.setUnitPos(),this.loadAdIcons())},BannerGuess.prototype.loadAdIcons=function(){AdLoader.load(this._conData.allAdIconRes,laya.utils.Handler.create(this,this.onLoadAdIcons))},BannerGuess.prototype.onLoadAdIcons=function(){if(this._pageId==CustomAdMgr.curPageId&&null!=this._conData)switch(this._iconPanel||(this._iconPanel=new Laya.Panel,this._iconPanel.pos(this._bg.x+BannerGuess.BorderDiff+this.offSetLeft,this._bg.y+BannerGuess.BorderDiff+this.offSetTop),this._iconPanel.size(this._bg.width-2*BannerGuess.BorderDiff-this.offSetLeft,this._bg.height-2*BannerGuess.BorderDiff-this.offSetTop),this.addChild(this._iconPanel)),this._iconPanel.removeChildren(),this.clearElements(),BannerGuess.AdAnimationType){case AdGuessAnimationType.Switch:this.showSwitchAd();break;case AdGuessAnimationType.Roll:this.showRollAd()}},BannerGuess.prototype.showRollAd=function(){if(this._curContents=this._contents.concat(),this.adIconLayout(),this._loadGuess=!0,this.doShowGuess(),this._curContents.length>this.iconNum){var t=this._iconPanel.getChildAt(this.iconNum-1),e=t.x+t.width,n=this._iconPanel.getChildAt(this._curContents.length-1),i=n.x+n.width;this._rollValueMax=i-e+BannerGuess.AdIconSpaceW,this._rollValue=0,this._iconPanel.hScrollBarSkin="",this._iconPanel.hScrollBar.setScroll(0,this._rollValueMax,this._rollValue),this._iconPanel.hScrollBar.changeHandler=new Laya.Handler(this,this.onRollChange),this._iconPanel.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown),this._iconPanel.on(Laya.Event.MOUSE_UP,this,this.MouseUp),this._iconPanel.on(Laya.Event.MOUSE_OUT,this,this.MouseUp),this.startRoll()}},BannerGuess.prototype.MouseDown=function(){this.stopRoll()},BannerGuess.prototype.MouseUp=function(){this.startRoll(),this._iconPanel.hScrollBar.stopScroll()},BannerGuess.prototype.onRollChange=function(t){this._rollValue=t},BannerGuess.prototype.startRoll=function(){Laya.timer.clear(this,this.onAdRoll),Laya.timer.frameLoop(1,this,this.onAdRoll)},BannerGuess.prototype.stopRoll=function(){Laya.timer.clear(this,this.onAdRoll)},BannerGuess.prototype.onAdRoll=function(){var t=Math.min(1,CustomAdConfig.AdRollPerMs*Laya.timer.delta);this._rollValue>=this._rollValueMax?this._rollInterval=-1:this._rollValue<=0&&(this._rollInterval=1),t=this._rollInterval*t,this._rollValue=Math.min(this._rollValueMax,this._rollValue+t),this._rollValue=Math.max(0,this._rollValue),this._iconPanel.hScrollBar.setScroll(0,this._rollValueMax,this._rollValue)},BannerGuess.prototype.showSwitchAd=function(){this._curContents=[],this._contents.length>this.iconNum?(Laya.timer.once(CustomAdConfig.AdSwitchTime,this,this.onAdSwitch),this._curContents=this.getShowContents()):this._curContents=this._curContents.concat(this._contents),this.adIconLayout(),this._loadGuess=!0,this.doShowGuess()},BannerGuess.prototype.adIconLayout=function(){for(var t=0;t<this._curContents.length;t++){var e=this._curContents[t];if(e&&e.resUrl){var n=new Laya.Sprite;n.mouseEnabled=!0;var i=AdElement.creatAdElement();if(this._curElements.push(i),i.setData(e,BannerGuess.AdIconWidth,BannerGuess.AdIconHeight,this._pageId,this._conData.containerId),i.icon.pos(0,0),n.addChild(i.icon),i.play(),this.needName){var o=new Laya.Label,s=.7*BannerGuess.AdIconSpaceW;o.font="SimHei",o.color=this.fontColor,o.align="center",o.valign="bottom",o.size(BannerGuess.AdIconWidth+s,BannerGuess.AdIconTxtHeight),o.fontSize=20*o.width/120,o.pos(-.5*s,BannerGuess.AdIconHeight),o.overflow=Laya.Text.HIDDEN,o.text=e.adName,n.addChild(o)}if(n.size(BannerGuess.AdIconWidth,BannerGuess.AdIconHeight+BannerGuess.AdIconTxtHeight),n.x=BannerGuess.AdIconSpaceW+t*(BannerGuess.AdIconSpaceW+n.width),n.y=BannerGuess.AdIconSpaceH,this._iconPanel.addChild(n),t+1==this._contents.length){var a=new Laya.Sprite;a.size(BannerGuess.AdIconSpaceW,BannerGuess.AdIconSpaceH),a.pos(n.x+n.width,n.y),this._iconPanel.addChild(a)}}}},BannerGuess.prototype.onAdSwitch=function(){Laya.timer.clear(this,this.onAdSwitch),this.onLoadAdIcons()},BannerGuess.prototype.getShowContents=function(){for(var t=[],e=0;e<this.iconNum;e++)t.push(this._contents[this._showCount]),this._showCount=++this._showCount%this._contents.length;return t},BannerGuess.prototype.clearElements=function(){if(this._curElements&&this._curElements.length>0)for(var t=this._curElements.length-1;t>=0;t--){var e=this._curElements[t];zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,e.adId,e.order,e.effectType),AdElement.recoverAdElement(e),this._curElements.splice(t,1)}this._curElements=[]},Object.defineProperty(BannerGuess.prototype,"isDefauleBg",{get:function(){return this.bgUrl==CustomAdConfig.HOST+"guessbg4.png"},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"needName",{get:function(){return!BannerGuess.CustomData.needName||BannerGuess.CustomData.needName},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"bgUrl",{get:function(){return BannerGuess.CustomData.bgSkin?BannerGuess.CustomData.bgSkin:CustomAdConfig.HOST+"guessbg4.png"},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"bgSizeGrid",{get:function(){return BannerGuess.CustomData.bgSizeGrid&&BannerGuess.CustomData.bgSkin?BannerGuess.CustomData.bgSizeGrid:"0,100,0,100,0"},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"iconNum",{get:function(){return BannerGuess.CustomData.iconNum?BannerGuess.CustomData.iconNum:5},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"containerWidth",{get:function(){return this.isDefauleBg?Laya.stage.width:BannerGuess.CustomData.containerWidth?BannerGuess.CustomData.containerWidth:Laya.stage.width},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"containerHeight",{get:function(){return BannerGuess.CustomData.containerHeight?BannerGuess.CustomData.containerHeight:180},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"offSetLeft",{get:function(){return BannerGuess.CustomData.offSetLeft?BannerGuess.CustomData.offSetLeft:0},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"offSetTop",{get:function(){return BannerGuess.CustomData.offSetTop?BannerGuess.CustomData.offSetTop:0},enumerable:!0,configurable:!0}),Object.defineProperty(BannerGuess.prototype,"fontColor",{get:function(){return BannerGuess.CustomData.fontColor?BannerGuess.CustomData.fontColor:"#f0f0f0"},enumerable:!0,configurable:!0}),BannerGuess.CustomData={},BannerGuess.AdIconWidth=80,BannerGuess.AdIconHeight=80,BannerGuess.AdIconTxtHeight=34,BannerGuess.AdIconSpaceW=23,BannerGuess.AdIconSpaceH=8,BannerGuess.BorderDiff=5,BannerGuess.AdAnimationType=AdGuessAnimationType.Roll,BannerGuess}(Laya.View),BannerAd=function(){function BannerAd(t){this._loaded=!0,this._adUnitId=t}return Object.defineProperty(BannerAd.prototype,"adUnitId",{get:function(){return this._adUnitId},enumerable:!0,configurable:!0}),Object.defineProperty(BannerAd.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),BannerAd.prototype.create=function(t,e,n,i,o,s){var a=this;if(void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=new Laya.Point(720,1440)),Laya.Browser.window.wx){var r=wx.getSystemInfoSync(),h=r&&-1!=r.model.indexOf("iPhone X");h?t=r.screenWidth:(t=t/s.x*r.screenWidth,e=e/s.y*r.screenHeight,o=o/Laya.stage.height*r.screenHeight),this._bannerAd=wx.createBannerAd({adUnitId:this._adUnitId,style:{left:n,top:i,width:t}}),this._bannerAd.onLoad(function(){console.log("banner 广告加载成功"),a._loaded=!0,BannerAd.bannerLoadCallback&&BannerAd.bannerLoadCallback.runWith({load:!0})}),this._bannerAd.onError(function(t){console.log("banner 广告加载失败",t),a._loaded=!1,BannerAd.bannerLoadCallback&&BannerAd.bannerLoadCallback.runWith({load:!1})}),this._bannerAd.onResize(function(t){if(0==n&&0==i)if(h)a._bannerAd.style.left=(r.screenWidth-a._bannerAd.style.realWidth)/2,a._bannerAd.style.top=Math.ceil(r.screenHeight-a._bannerAd.style.realHeight-12);else{var s=Math.min(o,e,t.height);if(s<t.height){var d=s*a._bannerAd.style.realWidth/a._bannerAd.style.realHeight;d>=300&&(a._bannerAd.style.width=d,a._bannerAd.style.height=s)}a._bannerAd.style.left=(r.screenWidth-a._bannerAd.style.realWidth)/2,a._bannerAd.style.top=r.screenHeight-a._bannerAd.style.realHeight}})}},BannerAd.prototype.show=function(){this._bannerAd&&this._bannerAd.show()},BannerAd.prototype.hide=function(){this._bannerAd&&this._bannerAd.hide()},BannerAd.prototype.destroy=function(){this._bannerAd&&this._bannerAd.destroy()},BannerAd}(),CustomizedBanner=function(t){function CustomizedBanner(){return t.call(this)||this}return __extends(CustomizedBanner,t),Object.defineProperty(CustomizedBanner.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),CustomizedBanner.prototype.show=function(){this._showFlag||(this._showFlag=!0,this.checkShow())},CustomizedBanner.prototype.hide=function(){this._showFlag=!1,this.checkShow()},CustomizedBanner.prototype.checkShow=function(){this.visible=this._showFlag&&this._loadFlag,this.visible?this._adElement&&zm.AdShowTime.instance.adShow(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType):this._adElement&&zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType)},CustomizedBanner.prototype.dispose=function(){this.clear()},CustomizedBanner.prototype.setUnit=function(t,e,n,i,o,s){if(void 0===o&&(o=0),void 0===s&&(s=0),e){this.clear(),this._contentIdx=-1,this._pageId=t,this._showFlag=!1,this._loadFlag=!1,this.visible=!1,this.mouseEnabled=!0,this.mouseThrough=!1,this._conData=e,this._contents=this._conData.contents;var a=i/n.y*Laya.stage.height;this.height=Math.min(a,this._conData.conHeight),this.height<this._conData.conHeight?this.width=this.height/this._conData.conHeight*this._conData.conWidth:this.width=this._conData.conWidth,this.setUnitPos(o,s),this.loadAndShow()}},CustomizedBanner.prototype.clear=function(){this.off(Laya.Event.CLICK,this,this.onClick),this.removeSelf(),this.removeChildren(),this.graphics.clear(),this._adElement&&(zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType),AdElement.recoverAdElement(this._adElement),this._adElement=null),Laya.timer.clear(this,this.onAdEnd),this._conData=null,this._curContentData=null,this._contents=[]},CustomizedBanner.prototype.setUnitPos=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),Laya.stage.addChild(this),this.zOrder=1100,this.x=void 0,this.y=void 0,this.centerX=void 0,this.centerY=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,0==t&&0==e?(this.centerX=0,this.bottom=0):(this.left=t,this.top=e)},CustomizedBanner.prototype.onClick=function(){this.loadAndShow()},CustomizedBanner.prototype.loadAndShow=function(){Laya.timer.clear(this,this.onAdEnd);for(var t,e=0;e<this._contents.length&&(this._contentIdx=(this._contentIdx+1)%this._contents.length,!(t=this._contents[this._contentIdx]));)e++;e<this._contents.length&&(this._curContentData&&t.adId==this._curContentData.adId||(this._curContentData=t,AdLoader.load(this._curContentData.resUrls,laya.utils.Handler.create(this,this.onLoadRes))))},CustomizedBanner.prototype.onLoadRes=function(){this._pageId==CustomAdMgr.curPageId&&null!=this._conData&&(this._loadFlag=!0,this._adElement?zm.AdShowTime.instance.adHide(this._pageId,this._conData.containerId,this._adElement.adId,this._adElement.order,this._adElement.effectType):this._adElement=AdElement.creatAdElement(),this.removeChildren(),this._adElement.setData(this._curContentData,this.width,this.height,this._pageId,this._conData.containerId,!0,laya.utils.Handler.create(this,this.onClick,null,!1)),this.addChild(this._adElement.icon),this._adElement.play(),this.checkShow(),Laya.timer.once(1e3*this._curContentData.showTime,this,this.onAdEnd))},CustomizedBanner.prototype.onAdEnd=function(t){this.loadAndShow()},CustomizedBanner}(Laya.View),BannerAdManager=function(){function BannerAdManager(){}return BannerAdManager.prototype.initBanner=function(t,e,n,i,o,s,a,r,h){void 0===t&&(t=650),void 0===e&&(e=220),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=6e4),void 0===s&&(s=0),void 0===a&&(a=new Laya.Point(720,1440)),void 0===h&&(h=!1),this._bannerShowFlag=!0,this._styleWidth=t,this._styleHeight=e,this._styleLeft=n,this._styleTop=i,this._interval=o,this._fixedHeight=0==s?e:s,this._designStyle=a,this._iphoneXEnable=h,BannerGuess.CustomData=r||{},BannerGuess.CustomData.containerWidth=BannerGuess.CustomData.containerWidth||t,BannerGuess.CustomData.containerHeight=BannerGuess.CustomData.containerHeight||e,BannerGuess.CustomData.pos=0==i&&0==n?{centerX:0,bottom:0}:{top:i,left:n},BannerAd.bannerLoadCallback=laya.utils.Handler.create(this,this.bannerCallback,null,!1)},BannerAdManager.prototype.bannerCallback=function(t){t&&1==t.load?this.removeBackup():this.showBackup()},BannerAdManager.prototype.setPageBanner=function(t,e,n,i){void 0===t&&(t=""),void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=null),this._pageInstance=n,this._curPageId=e,this._curAdUnitId=t,this._hasZmBannerData=!1,this._curBackupData=null,this._curGuessData=null,this._curCustomBannerData=null,i&&i>0&&(this._interval=i),this._bannerShowFlag=!0,0==e&&this.doShow()},BannerAdManager.prototype.updateGuess=function(t){this._curGuessData=t,this._hasZmBannerData=!0},BannerAdManager.prototype.updateBackup=function(t){this._curBackupData=t},BannerAdManager.prototype.updateCustomBanner=function(t){this._curCustomBannerData=t,this._hasZmBannerData=!0},BannerAdManager.prototype.showBanner=function(){this._bannerShowFlag=!0,this.doShow()},BannerAdManager.prototype.showBannerAfterLoaded=function(t){t==this._curPageId&&this.doShow()},BannerAdManager.prototype.doShow=function(){this._bannerShowFlag&&(0!=this._curPageId&&this._curPageId!=CustomAdMgr.curPageId||(0!=this._curPageId&&this._hasZmBannerData?this.showZmBannerAd():this.checkPhoneWxBannerEnable()&&this.showWxBanner(),Laya.timer.clear(this,this.updateBanner),Laya.timer.loop(this._interval,this,this.updateBanner)))},BannerAdManager.prototype.hideBanner=function(){this._bannerShowFlag=!1,this._curAd&&(this._curAd.loaded?this._curAd.hide():this.removeWxBanner()),this._curGuess&&this._curGuess.hide(),this._curBackup&&this._curBackup.hide(),this._curCustomBanner&&this._curCustomBanner.hide(),Laya.timer.clear(this,this.updateBanner)},BannerAdManager.prototype.showZmBannerAd=function(){this.removeWxBanner(),this._curGuessData?this.showGuess():this._curCustomBannerData&&this.showCustomBanner()},BannerAdManager.prototype.removeZmBannerAd=function(){this.removeCustomBanner(),this.removeGuess(),this.removeBackup()},BannerAdManager.prototype.showCustomBanner=function(){this.removeGuess(),this.removeBackup(),this._curCustomBanner?this._curCustomBanner.pageId!=this._curPageId&&this._curCustomBanner.setUnit(this._curPageId,this._curCustomBannerData,this._designStyle,this._styleHeight,this._styleLeft,this._styleTop):(this._curCustomBanner=new CustomizedBanner,this._curCustomBanner.setUnit(this._curPageId,this._curCustomBannerData,this._designStyle,this._styleHeight,this._styleLeft,this._styleTop)),this._curCustomBanner.show()},BannerAdManager.prototype.removeCustomBanner=function(){this._curCustomBanner&&(this._curCustomBanner.dispose(),this._curCustomBanner=null)},BannerAdManager.prototype.showGuess=function(){this.removeCustomBanner(),this.removeBackup(),this._curGuess?this._curGuess.pageId!=this._curPageId&&this._curGuess.setUnit(this._curPageId,this._curGuessData,this._pageInstance):(this._curGuess=new BannerGuess,this._curGuess.setUnit(this._curPageId,this._curGuessData,this._pageInstance)),this._curGuess.show()},BannerAdManager.prototype.removeGuess=function(){this._curGuess&&(this._curGuess.dispose(),this._curGuess=null)},BannerAdManager.prototype.showBackup=function(){!this._bannerShowFlag||!this._curBackupData||this._curAd&&this._curAd.loaded||(this._curBackup?this._curBackup.pageId!=this._curPageId&&this._curBackup.setUnit(this._curPageId,this._curBackupData,this._pageInstance):(this._curBackup=new BannerGuess,this._curBackup.setUnit(this._curPageId,this._curBackupData,this._pageInstance)),this._curBackup.show())},BannerAdManager.prototype.removeBackup=function(){this._curBackup&&(this._curBackup.dispose(),this._curBackup=null)},BannerAdManager.prototype.showWxBanner=function(){this.removeZmBannerAd(),this._curAd&&this._curAd.adUnitId==this._curAdUnitId?this._curAd.show():this.creatNewAd()},BannerAdManager.prototype.removeWxBanner=function(){this._curAd&&(this._curAd.destroy(),this._curAd=null)},BannerAdManager.prototype.updateBanner=function(){0!=this._curPageId&&this._hasZmBannerData?this.showZmBannerAd():this.creatNewAd()},BannerAdManager.prototype.creatNewAd=function(){this.removeWxBanner(),this._curAd=new BannerAd(this._curAdUnitId),this._curAd.create(this._styleWidth,this._styleHeight,this._styleLeft,this._styleTop,this._fixedHeight,this._designStyle),this._curAd.show()},BannerAdManager.prototype.removeBanner=function(){Laya.timer.clear(this,this.updateBanner),this.removeWxBanner(),this.removeZmBannerAd()},BannerAdManager.prototype.checkPhoneWxBannerEnable=function(){if(!Laya.Browser.window.wx)return!0;var t=wx.getSystemInfoSync();return console.log("system info",t),!(!this._iphoneXEnable&&this.checkIphoneX(t))&&!this.checkPhoneScreenOverWidth(t)},BannerAdManager.prototype.checkIphoneX=function(t){return t&&-1!=t.model.indexOf("iPhone X")},BannerAdManager.prototype.checkPhoneScreenOverWidth=function(t){return t&&t.screenWidth/t.screenHeight>.57},BannerAdManager}();!function(t){var e=function(){function AdShowTime(){this.adInfoes={},window.wx&&wx.onShow&&wx.onHide&&(wx.onShow(this.onShow.bind(this)),wx.onHide(this.onHide.bind(this))),this.lastStatTime=Date.now(),this.eventQueue=[]}return Object.defineProperty(AdShowTime,"instance",{get:function(){return this._instance||(this._instance=new this),this._instance},enumerable:!0,configurable:!0}),AdShowTime.prototype.adShow=function(t,e,n,i,o){this.currentPageId!=t&&this.showPage(t),this.getOrCreateAd(t,e,n,i,o).start=Laya.Browser.now()},AdShowTime.prototype.adHide=function(t,e,n,i,o,s){var a=this.getAd(t,e,n);a&&(a.duration+=Laya.Browser.now()-(a.start||this.onShowTime),a.start=0,this.pushEvent(a),s||delete this.adInfoes[a.adPageId][a.advid][a.adid])},AdShowTime.prototype.pushEvent=function(t){t&&(this.eventQueue.push(t),Laya.timer.once(1,this,this.checkQueueLength,null,!0))},AdShowTime.prototype.checkQueueLength=function(){var t=Date.now();(this.lastStatTime&&t-this.lastStatTime>1e4||this.eventQueue.length>10)&&this.stat()},AdShowTime.prototype.showPage=function(t){this.currentPageId&&this.hidePage(this.currentPageId),this.currentPageId=t},AdShowTime.prototype.hidePage=function(t){this.currentPageId===t&&(this.stat(),this.currentPageId=0)},AdShowTime.prototype.stat=function(){this.eventQueue.length>0&&(t.statistics.sendAdShowTimeEvents(t.gameID(),this.eventQueue),this.eventQueue=[],this.lastStatTime=Date.now())},AdShowTime.prototype.getAd=function(t,e,n){var i=this.adInfoes[t];if(i){var o=i[e];if(o)return o[n]}},AdShowTime.prototype.getOrCreateAd=function(t,e,n,i,o){var s=this.adInfoes[t];s||(s={},this.adInfoes[t]=s);var a=s[e];a||(a={},s[e]=a);var r=a[n];return r||(r={adPageId:t,advid:e,adid:n,order:i+1,effectType:o,duration:0,start:Laya.Browser.now()},a[n]=r),r},AdShowTime.prototype.onHide=function(){var t,e,n=this,i=this.adInfoes[this.currentPageId];i&&(Object.keys(i).forEach(function(o){t=i[o],Object.keys(t).forEach(function(i){e=t[i],n.adHide(n.currentPageId,Number(o),Number(i),e.order,e.effectType,!0)})}),this.stat())},AdShowTime.prototype.onShow=function(){this.onShowTime=Laya.Browser.now()},AdShowTime}();t.AdShowTime=e}(zm||(zm={}));var CustomAdMgr=function(){function CustomAdMgr(){this._adDataMgr=new CustomAdData,this._bannerMgr=new BannerAdManager,this._adShowFlag=!0}return Object.defineProperty(CustomAdMgr,"curPageId",{get:function(){return CustomAdMgr._curPageId},enumerable:!0,configurable:!0}),Object.defineProperty(CustomAdMgr.prototype,"platformID",{set:function(t){CustomAdConfig.PlatformId=t},enumerable:!0,configurable:!0}),Object.defineProperty(CustomAdMgr.prototype,"uid",{set:function(t){CustomAdConfig.UID=t},enumerable:!0,configurable:!0}),CustomAdMgr.prototype.setAdEnable=function(t){void 0===t&&(t=!0),CustomAdMgr.AdEnable=t},CustomAdMgr.prototype.jumpMoreByPage=function(t){var e=this._adDataMgr.getCurPageAdContainerByType(t,AdContainType.More);if(e&&e[0]&&e[0].contents){var n=e[0],i=n.contents[0];if(i)return void AdClickHandler.openAd(i,t,n.containerId)}AdClickHandler.jumpApp("wx46c7a8da722329b5",t,0,null)},CustomAdMgr.prototype.showAdPoster=function(t,e){var n=this._adDataMgr.getCurPageAdContainerByType(t,AdContainType.Box);if(n&&n[0]){var i=n[0];AdBox.CustomData=e||{},AdBox.instance.setUnit(t,i)}else e&&e.callback&&e.callback()},CustomAdMgr.prototype.showAdFullScreen=function(t,e){var n=this._adDataMgr.getCurPageAdContainerByType(t,AdContainType.FullScreen),i=this._adDataMgr.getCurPageAdContainerByType(t,AdContainType.Guess);if(n&&n[0]&&i&&i[0])if(AdFullScreen.CustomData=e||{},AdFullScreen.instance.hasAdGuess)AdFullScreen.instance.setUnit(t,n[0],i[0]);else{var o=this._adDataMgr.creatAdGuess(GuessType.Horizontal),s=this._adDataMgr.creatAdGuess(GuessType.Vertical);AdFullScreen.instance.setUnit(t,n[0],i[0],o,s)}else e&&e.callback&&e.callback()},CustomAdMgr.prototype.addAd=function(t,e){CustomAdMgr.AdEnable&&this.setAdByPage(t,e)},CustomAdMgr.prototype.setAdCustomData=function(t,e,n){t&&t.newVersion?this._useMenuNew=!0:this._useMenuNew=!1,AdMenu.CustomData=t||{},AdMenuNew.CustomData=t||{},AdPendant.CustomData=n||{},CustomAdData.GuessCustomeData=e||{}},CustomAdMgr.prototype.initBanner=function(t,e,n,i,o,s,a,r,h){void 0===t&&(t=720),void 0===e&&(e=200),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=6e4),void 0===s&&(s=0),void 0===a&&(a=new Laya.Point(720,1440)),void 0===h&&(h=!1),this._bannerMgr.initBanner(t,e,n,i,o,s,a,r,h)},CustomAdMgr.prototype.setPageBanner=function(t,e,n,i){void 0===t&&(t=""),void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=null),CustomAdMgr.AdEnable&&this._bannerMgr.setPageBanner(t,e,n,i)},CustomAdMgr.prototype.showBanner=function(){CustomAdMgr.AdEnable&&this._bannerMgr.showBanner()},CustomAdMgr.prototype.hideBanner=function(){CustomAdMgr.AdEnable&&this._bannerMgr.hideBanner()},CustomAdMgr.prototype.showTaskAd=function(t,e,n){var i=this._adDataMgr.getCurPageAdContainerByType(t,AdContainType.PlayGame);if(i&&i[0]){var o=i[0];AdTask.CustomData=n||{},AdTask.instance.setUnit(t,o,e)}},CustomAdMgr.prototype.removeTaskAd=function(t){AdTask.instance.clear()},CustomAdMgr.prototype.removeAd=function(t){this._adShowFlag=!1,this._adDataMgr.removeAllAdLanternByPage(t),this._adDataMgr.removeAllAdMenuByPage(t),this._adDataMgr.removeAllAdMenuNewByPage(t),this._adDataMgr.removeAllAdGuessByPage(t),this._adDataMgr.removeAdPendantByPage(t),zm.AdShowTime.instance.hidePage(t)},CustomAdMgr.prototype.removeLatestAdPage=function(){null!=CustomAdMgr.curPageId&&this.removeAd(CustomAdMgr.curPageId)},CustomAdMgr.prototype.setAdByPage=function(t,e){this._adShowFlag=!0,CustomAdMgr._curPageId=t;var n=this._adDataMgr.getPageConfig(t);n?this.showCurPageAd(t,e,n):this.loadConfigByPage(t,e),zm.AdShowTime.instance.showPage(t)},CustomAdMgr.prototype.loadConfigByPage=function(t,e){if(CustomAdConfig.PlatformId){var n=CustomAdConfig.CustomAdHost+"/api/v1.1/adv",i={platform_id:CustomAdConfig.PlatformId,pages_id:t};zm.http.GET(n,i,Laya.Handler.create(this,this.onLoadSuc,[t,e]),Laya.Handler.create(this,this.onLoadFail,[t]))}},CustomAdMgr.prototype.onLoadSuc=function(t,e,n){if(console.log("page ad loaded",t),n&&!n.code&&n.data&&n.data.list){this._adDataMgr.parseServerData(t,n.data);var i=this._adDataMgr.getPageConfig(t);this.showCurPageAd(t,e,i)}},CustomAdMgr.prototype.onLoadFail=function(t){console.log("load customad fail: ",t)},CustomAdMgr.prototype.showCurPageAd=function(t,e,n){if(n){this._adTypes=[],AdPendant.clearPageData();for(var i=0;i<n.length;i++)n[i]&&n[i].contents.length>0&&(this._adTypes.push(n[i].containerType),n[i].containerType==AdContainType.Pendant&&AdPendant.PendantNum++),this.creatAd(t,e,n[i]);zm.eventCenter.event(zm.events.EventCustomAdLoaded,{pageId:t,adTypes:this._adTypes}),t==CustomAdMgr._curPageId&&this._bannerMgr.showBannerAfterLoaded(t)}},CustomAdMgr.prototype.creatAd=function(t,e,n){if(n&&0!=n.contents.length)switch(n.containerType){case AdContainType.Single:this.showLantern(t,n,e);break;case AdContainType.Menu:this.showMenu(t,n,e);break;case AdContainType.Guess:this.showGuess(t,n,e);break;case AdContainType.PlayGame:case AdContainType.More:break;case AdContainType.BannerGuess:this._bannerMgr.updateGuess(n);break;case AdContainType.Box:AdBox.instance.preload(n);break;case AdContainType.Backup:this._bannerMgr.updateBackup(n);break;case AdContainType.Pendant:this.showPendant(t,n,e);break;case AdContainType.FullScreen:AdFullScreen.instance.preload(n);break;case AdContainType.CustomizedBanner:this._bannerMgr.updateCustomBanner(n)}},CustomAdMgr.prototype.showLantern=function(t,e,n){this._adShowFlag&&this._adDataMgr.creatAdLantern().setUnit(t,e,n)},CustomAdMgr.prototype.showMenu=function(t,e,n){t==CustomAdMgr._curPageId&&this._adShowFlag&&(this._useMenuNew?this._adDataMgr.creatAdMenuNew().setUnit(t,e,n):this._adDataMgr.creatAdMenu().setUnit(t,e,n))},CustomAdMgr.prototype.showGuess=function(t,e,n){if(t==CustomAdMgr._curPageId&&this._adShowFlag){var i=null==CustomAdData.GuessCustomeData.guessType?GuessType.Horizontal:CustomAdData.GuessCustomeData.guessType;this._adDataMgr.creatAdGuess(i).setUnit(t,e,n,CustomAdData.GuessCustomeData)}},CustomAdMgr.prototype.showPendant=function(t,e,n){t==CustomAdMgr._curPageId&&this._adShowFlag&&this._adDataMgr.creatAdPendant().setUnit(t,e,n)},CustomAdMgr.AdEnable=!0,CustomAdMgr}();!function(t){var e=function(){function RemoteConfig(){}return Object.defineProperty(RemoteConfig.prototype,"URL",{set:function(e){this.configURL!=e&&(this.configURL=e,this.fetch(),t.eventCenter.on(t.events.EventLogin,this,this.onLogin))},enumerable:!0,configurable:!0}),RemoteConfig.prototype.onLogin=function(){this.failure&&this.fetch()},RemoteConfig.prototype.fetch=function(){var e=Math.floor(Date.now()/RemoteConfig.UpdateInterval)*RemoteConfig.UpdateInterval;t.http.GET(this.configURL,{t:e},Laya.Handler.create(this,this.onFetchSuccess),Laya.Handler.create(this,this.onFetchFail),RemoteConfig.MaxRetryCnt)},RemoteConfig.prototype.onFetchSuccess=function(e){this.config=e,this.failure=!1,t.eventCenter.event(t.events.EventRemoteCfgLoaded,e)},RemoteConfig.prototype.onFetchFail=function(){this.config={},this.failure=!0},RemoteConfig.prototype.getItem=function(t){if(this.config)return this.config[t]},RemoteConfig.UpdateInterval=3e4,RemoteConfig.MaxRetryCnt=3,RemoteConfig}();t.RemoteConfig=e}(zm||(zm={})),function(t){var e=function(){function ShareConfig(){this.sharePointContents={}}return ShareConfig.prototype.init=function(t,e){this.uid=e,this.gameID=t,this.retryCnt=0,this.fetchShareCfg()},Object.defineProperty(ShareConfig.prototype,"UID",{set:function(t){this.uid=t},enumerable:!0,configurable:!0}),ShareConfig.prototype.shareStatus=function(t){var e=this.sharePointContents[t];return e&&2==e.status?2:1},ShareConfig.prototype.getSharePointCfg=function(t,e,n,i){var o,s,a=this.sharePointContents[t];if(a&&(s=a.share_id,!e&&!n&&1==a.status&&a.share_contents&&a.share_contents.length>0))for(var r=Math.random()*a.count_weight,h=a.share_contents.length,d=void 0,u=0;u<h;u++)if((r-=(d=a.share_contents[u]).share_weight)<=0){e=e||d.share_content,n=n||d.share_img,o=d.share_content_id;break}return s||(s=ShareConfig.DefaultSharePointID),o||(o=ShareConfig.DefaultShareID),e||(e=this.defaultTitle),n||(n=this.defaultImg),i||(i={}),i.sharepid=s,i.shareid=o,this.uid&&(i.shareuid=this.uid),{title:e,imageUrl:n,query:i,sharepid:s,shareid:o}},ShareConfig.prototype.defaultShareConfig=function(t,e){this.defaultTitle=t,this.defaultImg=e},ShareConfig.prototype.getDefaultConfig=function(t,e,n,i){var o=this.sharePointContents[t],s=ShareConfig.DefaultSharePointID;o&&(s=o.share_id);var a=ShareConfig.DefaultShareID;return i||(i={}),i.sharepid=s,i.shareid=a,{title:e=e||this.defaultTitle,imageUrl:n=n||this.defaultImg,query:i,shareid:a,sharepid:s}},ShareConfig.prototype.fetchShareCfg=function(){t.http.GET(ShareConfig.ShareCfgHost+ShareConfig.ShareCfgUrl,{platform_id:this.gameID},Laya.Handler.create(this,this.onFetchSuccess),Laya.Handler.create(this,this.onFetchFail))},ShareConfig.prototype.onFetchSuccess=function(t){if(0==t.code){if(this.sharePointContents={},t.data&&t.data.list)for(var e=0,n=t.data.list;e<n.length;e++){var i=n[e];this.sharePointContents[i.share_tag]=i}}else console.log("fetch share config result error. code:"+t.code)},ShareConfig.prototype.onFetchFail=function(){if(!(this.retryCnt>3)){console.log("retry to fetch share config!");var t=Math.pow(2,this.retryCnt);Laya.timer.once(t,this,this.retryFetchConfig)}},ShareConfig.prototype.retryFetchConfig=function(){this.retryCnt++,this.fetchShareCfg()},ShareConfig.ShareCfgHost="https://adplatform.rzcdz2.com",ShareConfig.ShareCfgUrl="/api/v1.1/share",ShareConfig.DefaultShareID=-1,ShareConfig.DefaultSharePointID=-1,ShareConfig}();t.ShareConfig=e}(zm||(zm={})),function(t){var e=function(){function Statistics(){this.Server="https://zm.rzcdz2.com/stat",this.isInit=!1,this.info={}}return Statistics.prototype.init=function(t,e){if(this.info.ak=t,this.info.v=e,!this.initDeviceInfo())return!1;this.setUpOnErrorHandler(),this.isInit=!0},Statistics.prototype.send=function(t,e){var n={};for(var i in this.info)n[i]=this.info[i];n.ev=t,n.ct=e,n.ts=Date.now(),n.rnd=Math.floor(1e7*Math.random()),this.upload(n)},Statistics}();t.Statistics=e}(zm||(zm={})),function(t){var e,n,i,o,s,a;function sendAdEvent(t){if(Laya.Browser.window.wx&&wx.aldSendEvent){var e=wx.getLaunchOptionsSync();if(e&&e.referrerInfo){var n=e.referrerInfo;n.appId&&n.extraData&&(n.extraData.advid||n.extraData.adid)&&wx.aldSendEvent(t,{appid:n.appId,"广告位":n.extraData.advid,"广告":n.extraData.adid})}}}function onLogin(e){e&&(t.eventCenter.off(t.events.EventLogin,t,onLogin),o=e.OpenID,s=e.UID,t.opendata.onLogin(o),t.statistics.initUserInfo(o,s),t.ad.uid=s,t.share.UID=s,e.First?sendAdEvent("内部跳转进来-新用户"):sendAdEvent("内部跳转进来-老用户"),0==t.system.runtimePlatform&&t.system.compareSDKVersion("2.4.0")>=0&&e.ActivityID&&wx.updateShareMenu({withShareTicket:!0,isUpdatableMessage:!0,activityId:e.ActivityID,templateInfo:[{name:"member_count",value:"6533532"},{name:"room_limit",value:"10000000"}]}))}t.shouldSendStat=!1,t.Stat_Offset=1e3,a="https://adplatform.rzcdz2.com",t.gameID=function(){return e},t.gameName=function(){return n},t.version=function(){return i},t.openID=function(){return o},t.userID=function(){return s},t.init=function(o,s,r,h){s&&r?(t.appId=o,CustomAdConfig.CustomAdHost=a,t.ShareConfig.ShareCfgHost=a,t.eventCenter=new Laya.EventDispatcher,e=s,n=r.toString(),i=h.toString(),t.remoteConfig=new t.RemoteConfig,t.shareConfig=new t.ShareConfig,t.ad=new CustomAdMgr,t.ad.platformID=e,t.initWeb(t.shareConfig),t.eventCenter.on(t.events.EventLogin,t,onLogin),t.share.init(e),t.statistics.init(null,null,t.utils.adaptStatID(t.gameID(),t.Stat_Offset),t.gameName(),t.version()),sendAdEvent("内部跳转进来")):console.log("gameID or gameName is null!")},t.onLogin=onLogin}(zm||(zm={})),window.zm=zm,function(t){var e=function(t){function WebYokaStat(){return null!==t&&t.apply(this,arguments)||this}return __extends(WebYokaStat,t),WebYokaStat.prototype.initParams=function(){},WebYokaStat.prototype.netType=function(){return"wifi"},WebYokaStat}(t.YokaStat);t.WebYokaStat=e}(zm||(zm={})),function(t){!function(t){t.EventLogin="EventLogin",t.EventNetTypeChanged="EventNetTypeChanged ",t.EventAppShow="EventAppShow",t.EventAppHide="EventAppHide",t.EventRemoteCfgLoaded="EventRemoteCfgLoaded",t.EventCustomAdLoaded="EventCustomAdLoaded",t.EventJumpAppSuccess="EventJumpAppSuccess",t.EventJumpAppFail="EventJumpAppFail"}(t.events||(t.events={}))}(zm||(zm={})),function(t){var e=function(){function LoginHandler(){this.sessionTime=0,this.validityTime=0,this.retryCnt=0,this.MaxRetry=3,this._status=0}return Object.defineProperty(LoginHandler.prototype,"loginUrl",{set:function(e){e&&this._loginUrl!==e&&(t.eventCenter.on(t.events.EventNetTypeChanged,this,this.onNetTypeChanged),this._loginUrl=e,this.login())},enumerable:!0,configurable:!0}),LoginHandler.prototype.relogin=function(){1!==this._status&&this.login()},LoginHandler.prototype.login=function(){this._status=1,this._loginUrl?this.doLogin():console.debug("loginUrl is null!")},LoginHandler.prototype.loginServer=function(e){console.log(" platform login success: "+JSON.stringify(e)),this._loginUrl?t.http.POST(this._loginUrl,e,Laya.Handler.create(this,this.onLoginServer),Laya.Handler.create(this,this.loginFail)):console.debug("loginUrl is null!")},LoginHandler.prototype.onLoginServer=function(t){t&&0===t.Status?(this.openid=t.OpenID,this.sessionId=t.Session.ID,this.validityTime=1e3*parseInt(t.Session.Expire),this.sessionTime=this.validityTime+Date.now(),this.loginSuccess(t)):this.loginFail()},LoginHandler.prototype.thirdLoginFail=function(){this.retryCnt<this.MaxRetry?Laya.timer.once(2e3,this,this.failThenLogin):this.loginFail()},LoginHandler.prototype.loginFail=function(){this._status=3,t.eventCenter.event(t.events.EventLogin)},LoginHandler.prototype.failThenLogin=function(){this.retryCnt++,this.login()},LoginHandler.prototype.loginSuccess=function(e){this.retryCnt=0,this._status=2,t.eventCenter.event(t.events.EventLogin,e)},LoginHandler.prototype.onNetTypeChanged=function(t){3==this.loginStatus&&0!=t&&this.login()},Object.defineProperty(LoginHandler.prototype,"loginStatus",{get:function(){return 2===this._status&&this.sessionTime<=Date.now()&&(this._status=0),this._status},enumerable:!0,configurable:!0}),Object.defineProperty(LoginHandler.prototype,"openID",{get:function(){return this.openid},enumerable:!0,configurable:!0}),LoginHandler.prototype.updateSessionTime=function(){this.sessionTime=this.validityTime+Date.now()},Object.defineProperty(LoginHandler.prototype,"sessionEndTime",{get:function(){return this.sessionTime},enumerable:!0,configurable:!0}),Object.defineProperty(LoginHandler.prototype,"session",{get:function(){return Date.now()>this.sessionTime&&(this.sessionId=null),this.sessionId},enumerable:!0,configurable:!0}),LoginHandler}();t.LoginHandler=e}(zm||(zm={})),function(t){!function(t){function getVibrateAllow(){var t=Laya.LocalStorage.getItem("Local_Vibrate_Key");return!t||"off"!=t}t.vibrateShort=function(t,e){0!=getVibrateAllow()&&(navigator.vibrate=navigator.vibrate||Laya.Browser.window.navigator.webkitVibrate||Laya.Browser.window.navigator.mozVibrate||Laya.Browser.window.navigator.msVibrate,navigator.vibrate&&navigator.vibrate(15))},t.vibrateLong=function(t,e){0!=getVibrateAllow()&&(navigator.vibrate=navigator.vibrate||Laya.Browser.window.navigator.webkitVibrate||Laya.Browser.window.navigator.mozVibrate||Laya.Browser.window.navigator.msVibrate,navigator.vibrate&&navigator.vibrate(400))},t.setVibrateAllow=function(t){var e=t?"on":"off";Laya.LocalStorage.setItem("Local_Vibrate_Key",e)},t.getVibrateAllow=getVibrateAllow}(t.WebDevicer||(t.WebDevicer={}))}(zm||(zm={})),function(t){!function(t){t.GameVersion="game_version",t.ShareEnable="share_enable",t.GameTrigger="game_trigger"}(t.remote||(t.remote={}))}(zm||(zm={})),function(t){!function(e){e.shareAppMessage=function(t,e,n,i,o){console.log(arguments),i&&i.runWith(["111111111111111111"])},e.shareScreenShot=function(t,e,n,i,o,s){console.log(arguments),o&&o.runWith(["111111111111111111"])},e.rewardShareEnable=function(){var e=t.remoteConfig.getItem(t.remote.GameVersion);return!!(e&&t.utils.compareVersion(t.version(),e)<1&&t.remoteConfig.getItem(t.remote.ShareEnable))},e.zmGameTriggerState=function(e){var n=t.remoteConfig.getItem(t.remote.GameTrigger);if(null==n||null==n)return!1;var i=n[e];return null!=i&&null!=i&&i}}(t.WebShare||(t.WebShare={}))}(zm||(zm={})),function(t){var e=function(){function WebSystemHelper(){this.runtimePlatform=1}return WebSystemHelper.prototype.getLaunchOptions=function(){return{}},WebSystemHelper.prototype.onShareAppMessage=function(t){},WebSystemHelper.prototype.compareSDKVersion=function(t){return 0},WebSystemHelper.prototype.exit=function(){window.close()},WebSystemHelper}();t.WebSystemHelper=e}(zm||(zm={})),function(t){var e=function(){function WebOpenUtils(){}return WebOpenUtils.prototype.onLogin=function(t){console.log("openutils on login"+t)},WebOpenUtils.prototype.postMessage=function(t,e){console.log(t,e)},WebOpenUtils.prototype.refreshSharedSprite=function(t,e){return this.openSprite=new Laya.Sprite,this.openSprite},WebOpenUtils.prototype.destroySharedSprite=function(){this.openSprite&&(this.openSprite.destroy(),this.openSprite=null)},WebOpenUtils}();t.WebOpenUtils=e}(zm||(zm={})),function(t){!function(t){t.webRequest=function(t,e,n,i,o,s){var a=new Laya.HttpRequest;a.once(Laya.Event.COMPLETE,null,function(t){i&&i.runWith(t)}),a.once(Laya.Event.ERROR,null,function(t){o&&o.runWith(t)});var r=[];if(r.push("Content-Type"),r.push("application/json"),s)for(var h in s)r.push(h),r.push(s[h]);a.send(e,n,t,"json",r)}}(t.http||(t.http={}))}(zm||(zm={})),function(t){var e=function(){function SubmitAction(){}return Object.defineProperty(SubmitAction.prototype,"isSubmitting",{get:function(){return this._isSubmitting},enumerable:!0,configurable:!0}),SubmitAction.prototype.reset=function(t,e,n,i,o){this.retryCnt=0,this.score=e,this.key=t,this.startMs=n,this.endMs=i,this.order=o,this.data=null},SubmitAction.prototype.resubmit=function(){this.retryCnt++,this.submit()},SubmitAction.prototype.submitSuccess=function(){this.toResubmit?this.submit():this.complete&&this.complete.runWith(this.key)},SubmitAction.prototype.submitFail=function(){if(this.retryCnt>SubmitAction.MaxRetryCnt)return console.debug("submit score faile!",this.data),void(this.complete&&this.complete.runWith(this.key));var t=1e3*Math.pow(2,this.retryCnt);Laya.timer.once(t,this,this.resubmit)},SubmitAction.prototype.submit=function(t){t&&(this.complete=t),this.toResubmit=!1,this._isSubmitting=!0,this.doSubmit()},SubmitAction.prototype.doSubmit=function(){},SubmitAction.MaxRetryCnt=3,SubmitAction}();t.SubmitAction=e}(zm||(zm={})),function(t){var e=function(t){function WebSubmitAction(){return null!==t&&t.apply(this,arguments)||this}return __extends(WebSubmitAction,t),WebSubmitAction}(t.SubmitAction);t.WebSubmitAction=e}(zm||(zm={})),function(t){var e=function(){function SubmitActionManager(t){this.actions={},this.queue=[],this.submitAction=t}return SubmitActionManager.prototype.addAction=function(t,e){this.actions[t]?console.debug("action "+t+" is submitting"):this.actions[t]=e},SubmitActionManager.prototype.removeAction=function(t){this.actions[t]&&(this.queue.push(this.actions[t]),this.actions[t]=null)},SubmitActionManager.prototype.getAction=function(){return this.queue.length>0?this.queue.pop():new this.submitAction},SubmitActionManager.prototype.onSubmitComplete=function(t){this.removeAction(t)},SubmitActionManager.prototype.submit=function(t,e,n,i,o){var s=this.actions[t];s||(s=this.getAction(),this.addAction(t,s)),s.reset(t,e,n,i,o),s.isSubmitting?s.toResubmit=!0:s.submit(Laya.Handler.create(this,this.onSubmitComplete))},SubmitActionManager}();t.SubmitActionManager=e}(zm||(zm={})),function(t){var e=function(t){function WebLoginHandler(){return null!==t&&t.apply(this,arguments)||this}return __extends(WebLoginHandler,t),WebLoginHandler.prototype.doLogin=function(){this.loginFail()},WebLoginHandler}(t.LoginHandler);t.WebLoginHandler=e}(zm||(zm={}));var zm,Base64=function(){function Base64(){}return Base64.encode=function(t){var e,n,i,o,s,a,r,h="",d=0;for(t=Base64._utf8_encode(t);d<t.length;)o=(e=t.charCodeAt(d++))>>2,s=(3&e)<<4|(n=t.charCodeAt(d++))>>4,a=(15&n)<<2|(i=t.charCodeAt(d++))>>6,r=63&i,isNaN(n)?a=r=64:isNaN(i)&&(r=64),h=h+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(a)+Base64._keyStr.charAt(r);return h},Base64.decode=function(t){var e,n,i,o,s,a,r="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)e=Base64._keyStr.indexOf(t.charAt(h++))<<2|(o=Base64._keyStr.indexOf(t.charAt(h++)))>>4,n=(15&o)<<4|(s=Base64._keyStr.indexOf(t.charAt(h++)))>>2,i=(3&s)<<6|(a=Base64._keyStr.indexOf(t.charAt(h++))),r+=String.fromCharCode(e),64!=s&&(r+=String.fromCharCode(n)),64!=a&&(r+=String.fromCharCode(i));return r=Base64._utf8_decode(r)},Base64.isBase64=function(t){if(null==t||0==t.length)return!1;if(t.length%4!=0)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(!(n>="a"&&n<="z"||n>="A"&&n<="Z"||n>="0"&&n<="9"||"+"==n||"/"==n||"="==n))return!1}return!0},Base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},Base64._utf8_decode=function(t){for(var e="",n=0,i=0,o=0,s=0;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),s=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s),n+=3);return e},Base64}();!function(t){var e=function(){function API(){this.sessionValidity=0,this.sessionExpire=0,this.status=1,this.retryCnt=0,this.MaxRetry=2}return API.prototype.init=function(e){this.apiBase=e,t.eventCenter.on(t.events.EventNetTypeChanged,this,this.onNetTypeChanged)},API.prototype.onNetTypeChanged=function(t){1===this.Status&&0!=t&&this.login()},API.prototype.updateSession=function(){this.sessionExpire=this.sessionValidity+Date.now()},Object.defineProperty(API.prototype,"OpenID",{get:function(){return this.openid},enumerable:!0,configurable:!0}),Object.defineProperty(API.prototype,"Status",{get:function(){return 0===this.status&&this.sessionExpire<=Date.now()&&(this.status=1),this.status},enumerable:!0,configurable:!0}),Object.defineProperty(API.prototype,"Session",{get:function(){return 1==this.Status&&(this.session=null),this.session},enumerable:!0,configurable:!0}),API.prototype.loginZmServer=function(t,e,n){this.loginServer(t,e,n)},API.prototype.loginServer=function(e,n,i){var o=this;this.apiBase||(t.eventCenter.event(t.events.EventLogin),!i)?t.http.POST(this.apiBase+"/login",e,Laya.Handler.create(this,function(e){e&&0===e.Status?(o.openid=e.OpenID,o.session=e.Session.ID,o.sessionValidity=1e3*e.Session.Expire,o.sessionExpire=o.sessionValidity+Date.now(),o.status=0,o.retryCnt=0,t.eventCenter.event(t.events.EventLogin,e),n&&n.runWith(e)):i&&i.runWith(e)}),Laya.Handler.create(this,function(){o.loginFailed(n,i)})):i.run()},API.prototype.loginFailed=function(e,n){this.retryCnt<this.MaxRetry?(this.retryCnt++,Laya.timer.once(2e3*this.retryCnt,this,this.login,[e,n])):(t.eventCenter.event(t.events.EventLogin),n&&n.run())},API.prototype.doGET=function(e,n,i,o){var s=this;n.session=this.session,t.http.GET(this.apiBase+e,n,Laya.Handler.create(this,function(t){t&&0===t.Status?(s.updateSession(),i&&i.runWith(t)):t&&1===t.Status&&"Unauthorized"===t.Message?(s.sessionExpire=0,s.GET(e,n,i,o)):o&&o.runWith(t)}),o)},API.prototype.GET=function(t,e,n,i){var o=this;1==this.Status?this.login(Laya.Handler.create(this,function(s){s&&0===s.Status?o.doGET(t,e,n,i):i&&i.runWith(s)}),i):this.doGET(t,e,n,i)},API.prototype.doPOST=function(e,n,i,o){var s=this;t.http.POST(this.apiBase+e+"?session="+this.session,n,Laya.Handler.create(this,function(t){t&&0===t.Status?(s.updateSession(),i&&i.runWith(t)):t&&1===t.Status&&"Unauthorized"===t.Message?(s.sessionExpire=0,s.POST(e,n,i,o)):o&&o.runWith(t)}),o)},API.prototype.POST=function(t,e,n,i){var o=this;1==this.Status?this.login(Laya.Handler.create(this,function(s){s&&0===s.Status?o.doPOST(t,e,n,i):i&&i.runWith(s)}),i):this.doPOST(t,e,n,i)},API.prototype.getScore=function(t,e,n){this.GET("/user/score/"+parseInt(t+""),{},e,n)},API.prototype.setScore=function(t,e,n,i,o){this.POST("/rank",{Score:t,Type:e,Currency:n,Force:!1},i,o)},API.prototype.setScoreForce=function(t,e,n,i,o){this.POST("/rank",{Score:t,Type:e,Currency:n,Force:!0},i,o)},API.prototype.setUserInfo=function(t,e,n,i){this.POST("/user/info",{Name:t,Avatar:e},n,i)},API.prototype.uploadEncodeUserInfo=function(t,e,n,i){this.setUserInfo(Base64.encode(t),Base64.encode(e),n,i)},API.prototype.getRank=function(t,e,n){this.GET("/user/rank/"+parseInt(t+""),{},e,n)},API.prototype.getRankList=function(t,e,n){this.GET("/rank/list/"+parseInt(t+""),{},e,n)},API.prototype.getRankListLimit=function(t,e,n,i){this.GET("/rank/list/"+parseInt(t+""),{limit:e},n,i)},API.prototype.getRankListWithInfo=function(t,e,n){this.GET("/ttrank/list/"+parseInt(t+""),{},e,n)},API.prototype.getRankListWithInfoLimit=function(t,e,n,i){this.GET("/ttrank/list/"+parseInt(t+""),{limit:e},n,i)},API.prototype.getRankListWithDecodeInfo=function(t,e,n){this.getRankListWithInfo(t,Laya.Handler.create(this,function(t){t&&0==t.Status&&t.Lists&&t.Lists.length>0&&t.Lists.forEach(function(t){t&&(Base64.isBase64(t.Name)&&(t.Name=Base64.decode(t.Name)),Base64.isBase64(t.Avatar)&&(t.Avatar=Base64.decode(t.Avatar)))}),e&&e.runWith([t])}),n)},API.prototype.getRankListWithDecodeInfoLimit=function(t,e,n,i){this.getRankListWithInfoLimit(t,e,Laya.Handler.create(this,function(t){t&&0==t.Status&&t.Lists&&t.Lists.length>0&&t.Lists.forEach(function(t){t&&(Base64.isBase64(t.Name)&&(t.Name=Base64.decode(t.Name)),Base64.isBase64(t.Avatar)&&(t.Avatar=Base64.decode(t.Avatar)))}),n&&n.runWith([t])}),i)},API.prototype.getCurrency=function(t,e){this.GET("/user/currency",{},t,e)},API.prototype.setCurrency=function(t,e,n,i){0==e&&0==t||this.POST("/user/currency",{Type:e,Currency:t},n,i)},API.prototype.getItemList=function(t,e){this.GET("/user/item",{},t,e)},API.prototype.setItem=function(t,e,n,i){0!=e&&(e>0?this.POST("/item/"+parseInt(t+""),{ItemNum:e},n,i):this.POST("/user/item/"+parseInt(t+""),{ItemNum:-e},n,i))},API.prototype.setData=function(t,e,n){this.POST("/user/data",{Data:JSON.stringify(t)},e,n)},API.prototype.getSign=function(t,e){this.GET("/sign",{},t,e)},API.prototype.setSign=function(t,e){this.POST("/sign",{},t,e)},API.prototype.getInviteList=function(t,e){this.GET("/task/invite",{},t,e)},API.prototype.completeInvite=function(t,e,n){this.POST("/share",{OpenID:t},e,n)},API.prototype.finishInvite=function(t,e,n,i){this.POST("/task/reward/"+parseInt(t+""),{Reset:e},n,i)},API.prototype.msgSecCheck=function(t,e,n){this.POST("/sec/msg",{Content:t},e,n)},API.prototype.subscribeMessage=function(t,e,n,i,o,s){void 0===i&&(i="index"),this.POST("/notify",{TemplateID:t,Data:e,Delay:n,Page:i},o,s)},API}();t.API=e}(zm||(zm={})),function(t){var e=function(t){function WebAPI(){return null!==t&&t.apply(this,arguments)||this}return __extends(WebAPI,t),WebAPI.prototype.login=function(t,e){this.loginFailed(t,e)},WebAPI}(t.API);t.WebAPI=e}(zm||(zm={})),function(t){var e=function(){function WebUpdate(){}return WebUpdate.prototype.checkUpdate=function(t){t&&t.run()},WebUpdate}();t.WebUpdate=e}(zm||(zm={})),function(t){t.initWeb=function(e){t.device=t.WebDevicer,t.shareHelper=t.WebShare,t.share=new t.YokaShare(t.WebShare,e),t.system=new t.WebSystemHelper,t.statistics=new t.WebYokaStat,t.opendata=new t.WebOpenUtils,t.http.request=t.http.webRequest,t.submitter=new t.SubmitActionManager(t.WebSubmitAction),t.login=new t.WebLoginHandler,t.api=new t.WebAPI,t.update=new t.WebUpdate}}(zm||(zm={}));